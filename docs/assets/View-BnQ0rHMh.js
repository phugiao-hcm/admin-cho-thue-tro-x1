import{q as ri,h as k,c as P,a as E,w as x,s as ee,x as Me,t as zt,y as Tt,b as p,z as ue,j as y,F as ye,A as Re,B as qe,m as ai,v as li,C as ci,D as nn,d as ui,f as Z,g as Xe,l as he,k as J,e as sn,E as on,u as rn,G as an,H as ln,I as cn,J as un,K as hn}from"./index-_O3ivw8j.js";import{G as dn,H as fn}from"./GoogleMap-7jrF316_.js";import{P as mn,T as pn,D as gn,F as vn}from"./const-DwMsQYav.js";import{d as bn,c as wn,a as yn,T as Rn,b as An}from"./firebaseConfig-Da22ytOl.js";const Sn={name:"InputNumber",props:{valueNumber:{type:[Number,String],default:0},dataObject:{},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},suffix:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:10},algin:{type:String,default:"center"}},data(){return{localValue:this.valueNumber}},computed:{countNumber:{get(){return this.localValue},set(e){this.localValue=Number(e.split(".").join("")),/iPhone|iPad|iPod/i.test(navigator.userAgent)&&this.onChange(this.localValue)}}},watch:{valueNumber(e){this.localValue=e}},methods:{onChange(e){this.localValue=e!=="NaN"?Number(e):this.min,this.localValue>this.max?this.localValue=this.max:this.localValue<this.min&&(this.localValue=this.min),this.$emit("onChange",this.localValue,this.dataObject)}}},xn={key:0,slot:"suffix",class:"el-input__icon body-small-regular neutral-600"};function En(e,t,i,n,o,s){const r=k("el-input");return E(),P(r,{class:Tt(i.algin),disabled:i.disabled,min:i.min,max:i.max,type:"number",modelValue:s.countNumber,"onUpdate:modelValue":t[0]||(t[0]=a=>s.countNumber=a),onChange:s.onChange,placeholder:i.placeholder?i.placeholder:e.$t("calendar.price_after_discount")},{default:x(()=>[i.suffix?(E(),ee("span",xn,zt(i.suffix),1)):Me("",!0)]),_:1},8,["class","disabled","min","max","modelValue","onChange","placeholder"])}const Bt=ri(Sn,[["render",En],["__scopeId","data-v-0ea08b88"]]),zn={name:"InputRoundMoney",props:{value:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},suffix:{type:String,default:""},algin:{type:String,default:"center"}},data(){return{inputValue:this.formatNumber(this.value)}},watch:{value(e){this.inputValue=this.formatNumber(e)},inputValue(e){this.$emit("input",this.parseNumber(e))}},mounted(){this.$nextTick(()=>{this.$refs.inputRef?.$refs?.input&&this.$refs.inputRef.$refs.input.setAttribute("enterkeyhint","go")})},methods:{handleBlur(){const e=this.parseNumber(this.inputValue);if(!e){this.inputValue="",this.$emit("input","");return}const t=e%1e3>=500?Math.ceil(e/1e3)*1e3:Math.floor(e/1e3)*1e3;this.inputValue=this.formatNumber(t),this.$emit("input",t)},removeFormatting(){const e=this.parseNumber(this.inputValue);this.inputValue=e?String(e):""},formatNumber(e){return e==null||e===""||Number(e)===0?"":new Intl.NumberFormat("it-IT",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},parseNumber(e){const i=String(e||"").replace(/[^\d]/g,"");return i?Number(i):""}}},Tn={class:"el-input__icon body-small-regular neutral-600"};function Cn(e,t,i,n,o,s){const r=k("el-input");return E(),P(r,{class:Tt(i.algin),disabled:i.disabled,modelValue:o.inputValue,"onUpdate:modelValue":t[0]||(t[0]=a=>o.inputValue=a),onBlur:s.handleBlur,onFocus:s.removeFormatting,placeholder:i.placeholder||e.$t("calendar.price_after_discount"),ref:"inputRef"},{suffix:x(()=>[p("span",Tn,zt(i.suffix),1)]),_:1},8,["class","disabled","modelValue","onBlur","onFocus","placeholder"])}const On=ri(zn,[["render",Cn],["__scopeId","data-v-75d3cac5"]]);function kt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),i.push.apply(i,n)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kt(Object(i),!0).forEach((function(n){G(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kt(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function G(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Mn(e,t){if(e==null)return{};var i,n,o=(function(r,a){if(r==null)return{};var l,c,u={},h=Object.keys(r);for(c=0;c<h.length;c++)l=h[c],a.indexOf(l)>=0||(u[l]=r[l]);return u})(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function ve(e){return(function(t){if(Array.isArray(t))return ot(t)})(e)||(function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)})(e)||(function(t,i){if(t){if(typeof t=="string")return ot(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(t,i)}})(e)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function ot(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Ut,_n,ke,j=(Ut=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function i(){for(var n=[],o=0;o<arguments.length;o++){var s=arguments[o];if(s){var r=typeof s;if(r==="string"||r==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var a=i.apply(null,s);a&&n.push(a)}}else if(r==="object")if(s.toString===Object.prototype.toString)for(var l in s)t.call(s,l)&&s[l]&&n.push(l);else n.push(s.toString())}}return n.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()},Ut(ke={path:_n,exports:{},require:function(e,t){return(function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")})(t==null&&ke.path)}},ke.exports),ke.exports),te=function(e){return function(t,i){if(!t)return e;var n;typeof t=="string"?n=t:i=t;var o=e;return n&&(o+="__"+n),o+(i?Object.keys(i).reduce((function(s,r){var a=i[r];return a&&(s+=" "+(typeof a=="boolean"?o+"--"+r:o+"--"+r+"_"+a)),s}),""):"")}};function mt(e,t,i){var n,o,s,r,a;function l(){var u=Date.now()-r;u<t&&u>=0?n=setTimeout(l,t-u):(n=null,i||(a=e.apply(s,o),s=o=null))}t==null&&(t=100);var c=function(){s=this,o=arguments,r=Date.now();var u=i&&!n;return n||(n=setTimeout(l,t)),u&&(a=e.apply(s,o),s=o=null),a};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(a=e.apply(s,o),s=o=null,clearTimeout(n),n=null)},c}mt.debounce=mt;var pt=mt,R=function(){return R=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function hi(e,t){var i,n;return e&&t?(i=""+e+t[0].toUpperCase()+t.slice(1),n=e+"-"+t):(i=e||t,n=e||t),{name:i,classname:n}}function di(e){return/^blob:/.test(e)}function It(e){return di(e)||(function(t){return/^data:/.test(t)})(e)}function we(e){return!!(e&&e.constructor&&e.call&&e.apply)}function H(e){return e===void 0}function He(e){return typeof e=="object"&&e!==null}function gt(e,t,i){var n={};return He(e)?(Object.keys(t).forEach((function(o){H(e[o])?n[o]=t[o]:He(t[o])?He(e[o])?n[o]=gt(e[o],t[o],i[o]):n[o]=e[o]?t[o]:i[o]:t[o]===!0||t[o]===!1?n[o]=!!e[o]:n[o]=e[o]})),n):e?t:i}function Ue(e){var t=Number(e);return Number.isNaN(t)?e:t}function jt(e){return typeof(e=="number"||(function(t){return typeof t=="object"&&t!==null})(e)&&toString.call(e)=="[object Number]")&&!fi(e)}function fi(e){return e!=e}function mi(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var Oe=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},Ln=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},Ct=function(e){this.type="move",this.directions=e},Pn=(function(){function e(t,i,n,o,s){this.type="drag",this.nativeEvent=t,this.position=n,this.previousPosition=o,this.element=i,this.anchor=s}return e.prototype.shift=function(){var t=this,i=t.element,n=t.anchor,o=t.position;if(i){var s=i.getBoundingClientRect(),r=s.left,a=s.top;return{left:o.left-r-n.left,top:o.top-a-n.top}}return{left:0,top:0}},e})(),Ot={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=ve(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce((function(t,i){return{clientX:t.clientX+i.clientX/e.touches.length,clientY:t.clientY+i.clientY/e.touches.length}}),{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),i=t.left,n=t.right,o=t.bottom,s=t.top;this.anchor={left:e.clientX-i,top:e.clientY-s,bottom:o-e.clientY,right:n-e.clientX}},processMove:function(e,t){var i=ve(t);if(this.touches.length){if(this.touches.length===1&&i.length===1){var n=this.$refs.draggable;this.$emit("drag",new Pn(e,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Ot.render=function(e,t,i,n,o,s){return E(),P("div",{ref:"draggable",class:i.classname,onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:t[3]||(t[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:t[4]||(t[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[ue(e.$slots,"default")],34)};var rt=te("vue-handler-wrapper"),pi={name:"HandlerWrapper",components:{DraggableElement:Ot},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,i=hi(this.horizontalPosition,this.verticalPosition);e=rt((G(t={},i.classname,!0),G(t,"disabled",this.disabled),t))}else e=rt({disabled:this.disabled});return{root:e,draggable:rt("draggable")}}},emits:["leave","enter","drag","drag-end"]};pi.render=function(e,t,i,n,o,s){var r=k("DraggableElement");return E(),P("div",{class:s.classes.root},[y(r,{class:s.classes.draggable,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:x((function(){return[ue(e.$slots,"default")]})),_:3},8,["class"])],2)};var Dn=te("vue-line-wrapper"),gi={name:"LineWrapper",components:{DraggableElement:Ot},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return Dn((G(e={},this.position,!0),G(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};gi.render=function(e,t,i,n,o,s){var r=k("DraggableElement");return E(),P(r,{class:s.classname,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:x((function(){return[ue(e.$slots,"default")]})),_:3},8,["class"])};var re=["left","right","top","bottom"],Nn=["left","right"],Bn=["top","bottom"],kn=["left","top"],Un=["fill-area","fit-area","stencil","none"],Ft={left:0,top:0,width:0,height:0};function Ht(e,t,i){return!(i=i||["width","height","left","top"]).some((function(n){return e[n]!==t[n]}))}function ae(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function Ae(e,t){return{left:e.left-t.left,top:e.top-t.top}}function W(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function _e(e,t){var i={left:0,top:0,right:0,bottom:0};return re.forEach((function(n){var o=t[n],s=ae(e)[n];i[n]=o!==void 0&&s!==void 0?n==="left"||n==="top"?Math.max(0,o-s):Math.max(0,s-o):0})),i}function oe(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function Ke(e){return{left:-e.left,top:-e.top}}function q(e,t){return R(R({},e),{left:e.left+t.left,top:e.top+t.top})}function Q(e,t,i,n){if(t!==1){if(i){var o=W(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(i.left-o.left)*(1-t),top:e.top+e.height*(1-t)/2+(i.top-o.top)*(1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function M(e){return e.width/e.height}function Se(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function xe(e,t){var i={left:0,top:0},n=_e(e,t);return n.left&&n.left>0?i.left=n.left:n.right&&n.right>0&&(i.left=-n.right),n.top&&n.top>0?i.top=n.top:n.bottom&&n.bottom>0&&(i.top=-n.bottom),i}function at(e,t){var i;return t.minimum&&e<t.minimum?i=t.minimum:t.maximum&&e>t.maximum&&(i=t.maximum),i}function vi(e,t){var i=M(e),n=M(t);return t.width<1/0&&t.height<1/0?i>n?{width:t.width,height:t.width/i}:{width:t.height*i,height:t.height}:t.width<1/0?{width:t.width,height:t.width/i}:t.height<1/0?{width:t.height*i,height:t.height}:e}function bi(e,t){var i=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(i))+Math.abs(e.height*Math.sin(i)),height:Math.abs(e.width*Math.sin(i))+Math.abs(e.height*Math.cos(i))}}function de(e,t){var i=t*Math.PI/180;return{left:e.left*Math.cos(i)-e.top*Math.sin(i),top:e.left*Math.sin(i)+e.top*Math.cos(i)}}function Ze(e,t){var i=_e($(e,t),t);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((e.width+i.left+i.right)/e.width,Se(e,t)):Math.min((e.height+i.top+i.bottom)/e.height,Se(e,t)):1}function $(e,t,i){i===void 0&&(i=!1);var n=xe(e,t);return q(e,i?Ke(n):n)}function vt(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function In(e,t){return R(R({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function wi(e,t,i){i===void 0&&(i=!0);var n={};return re.forEach((function(o){var s=e[o],r=t[o];s!==void 0&&r!==void 0?n[o]=o==="left"||o==="top"?i?Math.max(s,r):Math.min(s,r):i?Math.min(s,r):Math.max(s,r):r!==void 0?n[o]=r:s!==void 0&&(n[o]=s)})),n}function Ge(e,t){return wi(e,t,!0)}function Wt(e){var t=e.size,i=e.aspectRatio,n=e.ignoreMinimum,o=e.sizeRestrictions;return!!((t.correctRatio||M(t)>=i.minimum&&M(t)<=i.maximum)&&t.height<=o.maxHeight&&t.width<=o.maxWidth&&t.width&&t.height&&(n||t.height>=o.minHeight&&t.width>=o.minWidth))}function $t(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function ce(e){var t=e.width,i=e.height,n=e.sizeRestrictions,o={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},s={width:Math.max(n.minWidth,Math.min(n.maxWidth,t)),height:Math.max(n.minHeight,Math.min(n.maxHeight,i))};function r(c,u){return u===void 0&&(u=!1),c.reduce((function(h,f){return Wt({size:f,aspectRatio:o,sizeRestrictions:n,ignoreMinimum:u})&&(!h||$t(f,{width:t,height:i})<$t(h,{width:t,height:i}))?f:h}),null)}var a=[];o&&[o.minimum,o.maximum].forEach((function(c){c&&a.push({width:s.width,height:s.width/c,correctRatio:!0},{width:s.height*c,height:s.height,correctRatio:!0})})),Wt({size:s,aspectRatio:o,sizeRestrictions:n})&&a.push(s);var l=r(a)||r(a,!0);return l&&{width:l.width,height:l.height}}function bt(e){var t=e.event,i=e.coordinates,n=e.positionRestrictions,o=n===void 0?{}:n,s=q(i,t.directions);return q(s,xe(s,o))}function jn(e){var t=e.coordinates,i=e.transform,n=e.imageSize,o=e.sizeRestrictions,s=e.positionRestrictions,r=e.aspectRatio,a=e.visibleArea,l=function(u,h){return bt({coordinates:u,positionRestrictions:s,event:new Ct({left:h.left-u.left,top:h.top-u.top})})},c=R({},t);return(Array.isArray(i)?i:[i]).forEach((function(u){var h={};H((h=typeof u=="function"?u({coordinates:c,imageSize:n,visibleArea:a}):u).width)&&H(h.height)||(c=(function(f,g){var m=R(R(R({},f),ce({width:g.width,height:g.height,sizeRestrictions:o,aspectRatio:r})),{left:0,top:0});return l(m,{left:f.left,top:f.top})})(c,R(R({},c),h))),H(h.left)&&H(h.top)||(c=l(c,R(R({},c),h)))})),c}function Fn(e){e.event;var t=e.getAreaRestrictions,i=e.boundaries,n=e.coordinates,o=e.visibleArea;e.aspectRatio;var s=e.stencilSize,r=e.sizeRestrictions,a=e.positionRestrictions;e.stencilReference;var l,c,u,h=R({},n),f=R({},o),g=R({},s);l=M(g),c=M(h),u===void 0&&(u=.001),(l===0||c===0?Math.abs(c-l)<u:Math.abs(c/l)<1+u&&Math.abs(c/l)>1-u)||(h=R(R({},h),ce({sizeRestrictions:r,width:h.width,height:h.height,aspectRatio:{minimum:M(g),maximum:M(g)}})));var m=Ze(f=Q(f,h.width*i.width/(f.width*g.width)),t({visibleArea:f,type:"resize"}));return m!==1&&(f=Q(f,m),h=Q(h,m)),f=$(f=q(f,Ae(W(h),W(f))),t({visibleArea:f,type:"move"})),{coordinates:h=$(h,Ge(ae(f),a)),visibleArea:f}}function Hn(e){var t=e.event,i=e.getAreaRestrictions,n=e.boundaries,o=e.coordinates,s=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var r=e.positionRestrictions;e.stencilReference;var a=R({},o),l=R({},s);if(o&&s&&t.type!=="manipulateImage"){var c={width:0,height:0};l.width,n.width,M(n)>M(a)?(c.height=.8*n.height,c.width=c.height*M(a)):(c.width=.8*n.width,c.height=c.width*M(a));var u=Ze(l=Q(l,a.width*n.width/(l.width*c.width)),i({visibleArea:l,type:"resize"}));l=Q(l,u),u!==1&&(c.height/=u,c.width/=u),l=$(l=q(l,Ae(W(a),W(l))),i({visibleArea:l,type:"move"})),a=$(a,Ge(ae(l),r))}return{coordinates:a,visibleArea:l}}function Wn(e){var t=e.event,i=e.coordinates,n=e.visibleArea,o=e.getAreaRestrictions,s=R({},n),r=R({},i);if(t.type==="setCoordinates"){var a=Math.max(0,r.width-s.width),l=Math.max(0,r.height-s.height);a>l?s=Q(s,Math.min(r.width/s.width,Se(s,o({visibleArea:s,type:"resize"})))):l>a&&(s=Q(s,Math.min(r.height/s.height,Se(s,o({visibleArea:s,type:"resize"}))))),s=$(s=q(s,Ke(xe(r,ae(s)))),o({visibleArea:s,type:"move"}))}return{visibleArea:s,coordinates:r}}function $n(e){var t=e.imageSize,i=e.visibleArea,n=e.coordinates,o=i||t;return{left:(i?i.left:0)+o.width/2-n.width/2,top:(i?i.top:0)+o.height/2-n.height/2}}function Vn(e){var t=e.imageSize,i=e.visibleArea,n=e.aspectRatio,o=e.sizeRestrictions,s=i||t,r=Math.min(n.maximum||1/0,Math.max(n.minimum||0,M(s))),a=s.width<s.height?{width:.8*s.width,height:.8*s.width/r}:{height:.8*s.height,width:.8*s.height*r};return ce(R(R({},a),{aspectRatio:n,sizeRestrictions:o}))}function qn(e){var t,i,n=e.imageSize,o=e.visibleArea,s=e.boundaries,r=e.aspectRatio,a=e.sizeRestrictions,l=e.stencilSize,c=o||n;return M(c)>M(s)?i=(t=l.height*c.height/s.height)*M(l):t=(i=l.width*c.width/s.width)/M(l),ce({width:i,height:t,aspectRatio:r,sizeRestrictions:a})}function Xn(e){var t=e.getAreaRestrictions,i=e.coordinates,n=e.imageSize,o=M(e.boundaries);if(i){var s={height:Math.max(i.height,n.height),width:Math.max(i.width,n.width)},r=vi({width:M(s)>o?s.width:s.height*o,height:M(s)>o?s.width/o:s.height},vt(t())),a={left:i.left+i.width/2-r.width/2,top:i.top+i.height/2-r.height/2,width:r.width,height:r.height},l=_e(i,ae(R({left:0,top:0},n))),c={};return!l.left&&!l.right&&a.width<=n.width&&(c.left=0,c.right=n.width),!l.top&&!l.bottom&&a.height<=n.height&&(c.top=0,c.bottom=n.height),$(a,c)}var u=M(n);return r={height:u>o?n.height:n.width/o,width:u>o?n.height*o:n.width},{left:n.width/2-r.width/2,top:n.height/2-r.height/2,width:r.width,height:r.height}}function Ie(e,t){return wi(e,ae(t))}function Yn(e){var t=e.event,i=e.coordinates,n=e.visibleArea,o=e.sizeRestrictions,s=e.getAreaRestrictions,r=e.positionRestrictions,a=e.adjustStencil,l=t.scale,c=t.move,u=R({},n),h=R({},i),f=1,g=1,m=l.factor&&Math.abs(l.factor-1)>.001;u=q(u,{left:c.left||0,top:c.top||0});var v={stencil:{minimum:Math.max(o.minWidth?o.minWidth/h.width:0,o.minHeight?o.minHeight/h.height:0),maximum:Math.min(o.maxWidth?o.maxWidth/h.width:1/0,o.maxHeight?o.maxHeight/h.height:1/0,Se(h,r))},area:{maximum:Se(u,s({visibleArea:u,type:"resize"}))}};l.factor&&m&&(l.factor<1?(g=Math.max(l.factor,v.stencil.minimum))>1&&(g=1):l.factor>1&&(g=Math.min(l.factor,Math.min(v.area.maximum,v.stencil.maximum)))<1&&(g=1)),g&&(u=Q(u,g,l.center));var w=i.left-n.left,z=n.width+n.left-(i.width+i.left),L=i.top-n.top,D=n.height+n.top-(i.height+i.top);return u=$(u=q(u,xe(u,{left:r.left!==void 0?r.left-w*g:void 0,top:r.top!==void 0?r.top-L*g:void 0,bottom:r.bottom!==void 0?r.bottom+D*g:void 0,right:r.right!==void 0?r.right+z*g:void 0})),s({visibleArea:u,type:"move"})),h.width=h.width*g,h.height=h.height*g,h.left=u.left+w*g,h.top=u.top+L*g,h=$(h,Ge(ae(u),r)),l.factor&&m&&a&&(l.factor>1?f=Math.min(v.area.maximum,l.factor)/g:l.factor<1&&(f=Math.max(h.height/u.height,h.width/u.width,l.factor/g)),f!==1&&(u=q(u=$(u=Q(u,f,l.factor>1?l.center:W(h)),s({visibleArea:u,type:"move"})),Ke(xe(h,ae(u)))))),{coordinates:h,visibleArea:u}}function Jn(e){var t=e.aspectRatio,i=e.getAreaRestrictions,n=e.coordinates,o=e.visibleArea,s=e.sizeRestrictions,r=e.positionRestrictions,a=e.imageSize,l=e.previousImageSize,c=e.angle,u=R({},n),h=R({},o),f=de(W(R({left:0,top:0},l)),c);return(u=R(R({},ce({sizeRestrictions:s,aspectRatio:t,width:u.width,height:u.height})),de(W(u),c))).left-=f.left-a.width/2+u.width/2,u.top-=f.top-a.height/2+u.height/2,h=Q(h,Ze(h,i({visibleArea:h,type:"resize"}))),{coordinates:u=$(u,r),visibleArea:h=$(h=q(h,Ae(W(u),W(n))),i({visibleArea:h,type:"move"}))}}function Kn(e){var t=e.flip,i=e.previousFlip,n=e.rotate,o=e.getAreaRestrictions,s=e.coordinates,r=e.visibleArea,a=e.imageSize,l=R({},s),c=R({},r),u=i.horizontal!==t.horizontal,h=i.vertical!==t.vertical;if(u||h){var f=de({left:a.width/2,top:a.height/2},-n),g=de(W(l),-n),m=de({left:u?f.left-(g.left-f.left):g.left,top:h?f.top-(g.top-f.top):g.top},n);l=q(l,Ae(m,W(l))),g=de(W(c),-n),c=$(c=q(c,Ae(m=de({left:u?f.left-(g.left-f.left):g.left,top:h?f.top-(g.top-f.top):g.top},n),W(c))),o({visibleArea:c,type:"move"}))}return{coordinates:l,visibleArea:c}}function Vt(e){var t=e.directions,i=e.coordinates,n=e.positionRestrictions,o=n===void 0?{}:n,s=e.sizeRestrictions,r=e.preserveRatio,a=e.compensate,l=R({},t),c=oe(i,l).width,u=oe(i,l).height;c<0&&(l.left<0&&l.right<0?(l.left=-(i.width-s.minWidth)/(l.left/l.right),l.right=-(i.width-s.minWidth)/(l.right/l.left)):l.left<0?l.left=-(i.width-s.minWidth):l.right<0&&(l.right=-(i.width-s.minWidth))),u<0&&(l.top<0&&l.bottom<0?(l.top=-(i.height-s.minHeight)/(l.top/l.bottom),l.bottom=-(i.height-s.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(i.height-s.minHeight):l.bottom<0&&(l.bottom=-(i.height-s.minHeight)));var h=_e(oe(i,l),o);a&&(h.left&&h.left>0&&h.right===0?(l.right+=h.left,l.left-=h.left):h.right&&h.right>0&&h.left===0&&(l.left+=h.right,l.right-=h.right),h.top&&h.top>0&&h.bottom===0?(l.bottom+=h.top,l.top-=h.top):h.bottom&&h.bottom>0&&h.top===0&&(l.top+=h.bottom,l.bottom-=h.bottom),h=_e(oe(i,l),o));var f={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(re.forEach((function(v){var w=h[v];w&&l[v]&&(f[v]=Math.max(0,1-w/l[v]))})),r){var g=Math.min.apply(null,re.map((function(v){return f[v]})));g!==1/0&&re.forEach((function(v){l[v]*=g}))}else re.forEach((function(v){f[v]!==1/0&&(l[v]*=f[v])}));if(c=oe(i,l).width,u=oe(i,l).height,l.right+l.left&&(c>s.maxWidth?f.width=(s.maxWidth-i.width)/(l.right+l.left):c<s.minWidth&&(f.width=(s.minWidth-i.width)/(l.right+l.left))),l.bottom+l.top&&(u>s.maxHeight?f.height=(s.maxHeight-i.height)/(l.bottom+l.top):u<s.minHeight&&(f.height=(s.minHeight-i.height)/(l.bottom+l.top))),r){var m=Math.min(f.width,f.height);m!==1/0&&re.forEach((function(v){l[v]*=m}))}else f.width!==1/0&&Nn.forEach((function(v){l[v]*=f.width})),f.height!==1/0&&Bn.forEach((function(v){l[v]*=f.height}));return l}function je(e,t,i){return t==0&&i==0?e/2:t==0?0:i==0?e:e*Math.abs(t/(t+i))}var Zn=te("vue-simple-handler"),Gn=te("vue-simple-handler-wrapper"),Mt={name:"SimpleHandler",components:{HandlerWrapper:pi},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(G(e={},this.horizontalPosition,!!this.horizontalPosition),G(e,this.verticalPosition,!!this.verticalPosition),G(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),G(e,"hover",this.hover),e);return{default:j(Zn(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:j(Gn(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Mt.render=function(e,t,i,n,o,s){var r=k("HandlerWrapper");return E(),P(r,{class:s.classes.wrapper,"vertical-position":i.verticalPosition,"horizontal-position":i.horizontalPosition,disabled:i.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:x((function(){return[y("div",{class:s.classes.default},null,2)]})),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Qn=te("vue-simple-line"),es=te("vue-simple-line-wrapper"),_t={name:"SimpleLine",components:{LineWrapper:gi},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:j(Qn(G({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:j(es(G({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};_t.render=function(e,t,i,n,o,s){var r=k("LineWrapper");return E(),P(r,{class:s.classes.wrapper,position:i.position,disabled:i.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:x((function(){return[y("div",{class:s.classes.root},null,2)]})),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var lt=te("vue-bounding-box"),ts=["east","west",null],is=["south","north",null],yi={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Mt}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return _t}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return ts.forEach((function(t){is.forEach((function(i){if(t!==i){var n=hi(t,i),o=n.name,s=n.classname;e.push({name:o,classname:s,verticalDirection:i,horizontalDirection:t})}}))})),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,i=this.linesClasses,n=this.linesWrappersClasses;return{root:lt(),handlers:e,handlersWrappers:t,lines:i,linesWrappers:n}},lineNodes:function(){var e=this,t=[];return this.points.forEach((function(i){i.horizontalDirection&&i.verticalDirection||!e.lines[i.name]||t.push({name:i.name,component:e.linesComponent,class:j(e.classes.lines.default,e.classes.lines[i.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:j(e.classes.linesWrappers.default,e.classes.linesWrappers[i.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.resizable})})),t},handlerNodes:function(){var e=this,t=[],i=this.width,n=this.height;return this.points.forEach((function(o){if(e.handlers[o.name]){var s={name:o.name,component:e.handlersComponent,class:j(e.classes.handlers.default,e.classes.handlers[o.name]),wrapperClass:j(e.classes.handlersWrappers.default,e.classes.handlersWrappers[o.name]),hoverClass:e.classes.handlers.hover,verticalDirection:o.verticalDirection,horizontalDirection:o.horizontalDirection,disabled:!e.resizable};if(i&&n){var r=o.horizontalDirection,a=o.verticalDirection,l=r==="east"?i:r==="west"?0:i/2,c=a==="south"?n:a==="north"?0:n/2;s.wrapperClass=lt("handler"),s.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(c,"px)")},e.transitions&&e.transitions.enabled&&(s.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else s.wrapperClass=lt("handler",G({},o.classname,!0));t.push(s)}})),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,i){var n,o=e.shift(),s=o.left,r=o.top,a={left:0,right:0,top:0,bottom:0};t==="west"?a.left-=s:t==="east"&&(a.right+=s),i==="north"?a.top-=r:i==="south"&&(a.bottom+=r),!i&&t?n="width":i&&!t&&(n="height"),this.resizable&&this.$emit("resize",new Ln(a,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:i==="south"||!i,top:i==="north"||!i},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:n}))}},emits:["resize","resize-end"]};yi.render=function(e,t,i,n,o,s){return E(),P("div",{ref:"box",class:s.classes.root,style:s.style},[ue(e.$slots,"default"),y("div",null,[(E(!0),P(ye,null,Re(s.lineNodes,(function(r){return E(),P(qe(r.component),{key:r.name,"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,position:r.name,disabled:r.disabled,onDrag:function(a){return s.onHandlerDrag(a,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[1]||(t[1]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])})),128))]),(E(!0),P(ye,null,Re(s.handlerNodes,(function(r){return E(),P("div",{key:r.name,style:r.wrapperStyle,class:r.wrapperClass},[(E(),P(qe(r.component),{"default-class":r.class,"hover-class":r.hoverClass,"wrapper-class":r.wrapperClass,"horizontal-position":r.horizontalDirection,"vertical-position":r.verticalDirection,disabled:r.disabled,onDrag:function(a){return s.onHandlerDrag(a,r.horizontalDirection,r.verticalDirection)},onDragEnd:t[2]||(t[2]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)})),128))],6)};var ns=te("vue-draggable-area"),Ri={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:ns()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=ve(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):mi({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top;this.anchor={x:e.clientX-i,y:e.clientY-n}},processMove:function(e,t){var i=ve(t);if(this.touches.length){var n=this.$refs.container.getBoundingClientRect(),o=n.left,s=n.top;this.touches.length===1&&i.length===1&&this.$emit("move",new Ct({left:i[0].clientX-(o+this.anchor.x),top:i[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};Ri.render=function(e,t,i,n,o,s){return E(),P("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[ue(e.$slots,"default")],544)};function ct(e){var t,i;return{rotate:e.rotate||0,flip:{horizontal:((t=e?.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((i=e?.flip)===null||i===void 0?void 0:i.vertical)||!1}}}function ss(e){return new Promise((function(t,i){try{if(e)if(/^data:/i.test(e))t((function(l){l=l.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(l),u=c.length,h=new ArrayBuffer(u),f=new Uint8Array(h),g=0;g<u;g++)f[g]=c.charCodeAt(g);return h})(e));else if(/^blob:/i.test(e)){var n=new FileReader;n.onload=function(l){t(l.target.result)},s=e,r=function(l){n.readAsArrayBuffer(l)},(a=new XMLHttpRequest).open("GET",s,!0),a.responseType="blob",a.onload=function(){this.status!=200&&this.status!==0||r(this.response)},a.send()}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===4&&(o.status===200||o.status===0?t(o.response):i("Warning: could not load an image to parse its orientation"),o=null)},o.onprogress=function(){o.getResponseHeader("content-type")!=="image/jpeg"&&o.abort()},o.withCredentials=!1,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)}else i("Error: the image is empty")}catch(l){i(l)}var s,r,a}))}function Ai(e){var t=e.rotate,i=e.flip,n=e.scaleX,o=e.scaleY,s="";return s+=" rotate("+t+"deg) ",s+=" scaleX("+n*(i.horizontal?-1:1)+") ",s+=" scaleY("+o*(i.vertical?-1:1)+") "}function os(e){try{var t,i=new DataView(e),n=void 0,o=void 0,s=void 0,r=void 0;if(i.getUint8(0)===255&&i.getUint8(1)===216)for(var a=i.byteLength,l=2;l+1<a;){if(i.getUint8(l)===255&&i.getUint8(l+1)===225){s=l;break}l++}if(s&&(n=s+10,(function(g,m,v){var w,z="";for(w=m,v+=m;w<v;w++)z+=String.fromCharCode(g.getUint8(w));return z})(i,s+4,4)==="Exif")){var c=i.getUint16(n);if(((o=c===18761)||c===19789)&&i.getUint16(n+2,o)===42){var u=i.getUint32(n+4,o);u>=8&&(r=n+u)}}if(r){for(var h=i.getUint16(r,o),f=0;f<h;f++)if(l=r+12*f+2,i.getUint16(l,o)===274){l+=8,t=i.getUint16(l,o),i.setUint16(l,1,o);break}}return t}catch{return null}}function qt(e,t){var i=t.getBoundingClientRect(),n=i.left,o=i.top,s={left:0,top:0},r=0;return e.forEach((function(a){s.left+=(a.clientX-n)/e.length,s.top+=(a.clientY-o)/e.length})),e.forEach((function(a){r+=mi({x:s.left,y:s.top},{x:a.clientX-n,y:a.clientY-o})})),{centerMass:s,spread:r,count:e.length}}var Si={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=pt(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new Oe({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=qt(t,this.$refs.container),n=this.oldGeometricProperties;n.count===i.count&&n.count>1&&this.$emit("resize",new Oe({left:n.centerMass.left-i.centerMass.left,top:n.centerMass.top-i.centerMass.top},{factor:n.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,i=t.getBoundingClientRect(),n=i.left,o=i.top,s=i.bottom,r=i.right;this.touches=ve(e.touches).filter((function(a){return a.clientX>n&&a.clientX<r&&a.clientY>o&&a.clientY<s})),this.oldGeometricProperties=qt(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var i=ve(e.touches).filter((function(n){return!n.identifier||t.touches.find((function(o){return o.identifier===n.identifier}))}));this.processEvent(e)&&(this.processMove(e,i),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top,o=1+this.wheelResize.ratio*(r=e.deltaY||e.detail||e.wheelDelta,(a=+r)==0||fi(a)?a:a>0?1:-1),s={left:e.clientX-i,top:e.clientY-n};this.$emit("resize",new Oe({},{factor:o,center:s})),this.touches.length||this.debouncedProcessEnd()}var r,a}},emits:["resize","move","transform-end"]};Si.render=function(e,t,i,n,o,s){return E(),P("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:t[3]||(t[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[ue(e.$slots,"default")],544)};var wt={components:{TransformableImage:Si},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};wt.render=function(e,t,i,n,o,s){var r=k("transformable-image");return E(),P(r,{"touch-move":i.touchMove,"touch-resize":i.touchResize,"mouse-move":i.mouseMove,"wheel-resize":i.wheelResize,onMove:t[1]||(t[1]=function(a){return e.$emit("move",a)}),onResize:t[2]||(t[2]=function(a){return e.$emit("resize",a)})},{default:x((function(){return[ue(e.$slots,"default")]})),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var Fe=te("vue-preview"),xi={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:Fe({fill:this.fill}),wrapper:Fe("wrapper"),imageWrapper:Fe("image-wrapper"),image:j(Fe("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=O(O({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),i=this.imageSize.width,n=this.imageSize.height,o=bi({width:i,height:n},t.rotate),s={width:"".concat(i,"px"),height:"".concat(n,"px"),left:"0px",top:"0px"},r={rotate:{left:(i-o.width)*t.scaleX/2,top:(n-o.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*i/2,top:(1-t.scaleY)*n/2}};return s.transform=`translate(
				`.concat(-this.coordinates.left/e-r.rotate.left-r.scale.left,"px,").concat(-this.coordinates.top/e-r.rotate.top-r.scale.top,"px) ")+Ai(t),this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){e.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};xi.render=function(e,t,i,n,o,s){return E(),P("div",{ref:"root",class:s.classes.root,style:s.style},[y("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[ai(y("img",{ref:"image",src:i.image&&i.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[li,i.image&&i.image.src]])],6)],6)};var Ei={components:{Preview:xi},inheritAttrs:!1};Ei.render=function(e,t,i,n,o,s){var r=k("preview");return E(),P(r,ci(e.$attrs,{fill:!0}),null,16)};var ut=te("vue-rectangle-stencil"),zi={name:"RectangleStencil",components:{StencilPreview:Ei,BoundingBox:yi,DraggableArea:Ri},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Mt}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return _t}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:j(ut({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:j(ut("preview"),this.previewClass),boundingBox:j(ut("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,n=e.left,o=e.top,s={width:"".concat(i,"px"),height:"".concat(t,"px"),transform:"translate(".concat(n,"px, ").concat(o,"px)")};return this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};zi.render=function(e,t,i,n,o,s){var r=k("stencil-preview"),a=k("draggable-area"),l=k("bounding-box");return E(),P("div",{class:s.classes.stencil,style:s.style},[y(l,{width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,transitions:i.transitions,class:s.classes.boundingBox,handlers:i.handlers,"handlers-component":i.handlersComponent,"handlers-classes":i.handlersClasses,"handlers-wrappers-classes":i.handlersWrappersClasses,lines:i.lines,"lines-component":i.linesComponent,"lines-classes":i.linesClasses,"lines-wrappers-classes":i.linesWrappersClasses,resizable:i.resizable,onResize:s.onResize,onResizeEnd:s.onResizeEnd},{default:x((function(){return[y(a,{movable:i.movable,onMove:s.onMove,onMoveEnd:s.onMoveEnd},{default:x((function(){return[y(r,{image:i.image,coordinates:i.coordinates,width:i.stencilCoordinates.width,height:i.stencilCoordinates.height,class:s.classes.preview,transitions:i.transitions},null,8,["image","coordinates","width","height","class","transitions"])]})),_:1},8,["movable","onMove","onMoveEnd"])]})),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var rs=["transitions"],le=te("vue-advanced-cropper"),Ti={name:"Cropper",components:{BackgroundWrapper:wt},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return zi}},backgroundWrapperComponent:{type:[Object,String],default:function(){return wt}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return Un.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,i=e.coordinates,n=e.aspectRatio,o=e.positionRestrictions,s=e.sizeRestrictions,r=R(R({},i),{right:i.left+i.width,bottom:i.top+i.height}),a=t.params||{},l=R({},t.directions),c=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};s.widthFrozen&&(l.left=0,l.right=0),s.heightFrozen&&(l.top=0,l.bottom=0),re.forEach((function(I){c[I]||(l[I]=0)}));var u=oe(r,l=Vt({coordinates:r,directions:l,sizeRestrictions:s,positionRestrictions:o})).width,h=oe(r,l).height,f=a.preserveRatio?M(r):at(u/h,n);if(f){var g=a.respectDirection;if(g||(g=r.width>=r.height||f===1?"width":"height"),g==="width"){var m=u/f-r.height;if(c.top&&c.bottom){var v=l.top,w=l.bottom;l.bottom=je(m,w,v),l.top=je(m,v,w)}else c.bottom?l.bottom=m:c.top?l.top=m:c.right?l.right=0:c.left&&(l.left=0)}else if(g==="height"){var z=r.width-h*f;if(c.left&&c.right){var L=l.left,D=l.right;l.left=-je(z,L,D),l.right=-je(z,D,L)}else c.left?l.left=-z:c.right?l.right=-z:c.top?l.top=0:c.bottom&&(l.bottom=0)}l=Vt({directions:l,coordinates:r,sizeRestrictions:s,positionRestrictions:o,preserveRatio:!0,compensate:a.compensate})}return u=oe(r,l).width,h=oe(r,l).height,(f=a.preserveRatio?M(r):at(u/h,n))&&Math.abs(f-u/h)>.001&&re.forEach((function(I){c[I]||(l[I]=0)})),bt({event:new Ct({left:-l.left,top:-l.top}),coordinates:{width:i.width+l.right+l.left,height:i.height+l.top+l.bottom,left:i.left,top:i.top},positionRestrictions:o})}},moveAlgorithm:{type:Function,default:bt},initStretcher:{type:Function,default:function(e){var t=e.stretcher,i=e.imageSize,n=M(i);t.style.width=i.width+"px",t.style.height=t.clientWidth/n+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,i=e.coordinates,n=e.aspectRatio,o=e.sizeRestrictions,s=e.positionRestrictions,r=R(R({},i),ce({width:i.width,height:i.height,aspectRatio:n,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,o.minHeight),minWidth:Math.min(t.width,o.minWidth)}}));return r=$(r=q(r,Ae(W(i),W(r))),Ge(ae(t),s))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,n=e.getAreaRestrictions,o=e.coordinates,s=R({},t);s.height=s.width/M(i),s.top+=(t.height-s.height)/2,(o.height-s.height>0||o.width-s.width>0)&&(s=Q(s,Math.max(o.height/s.height,o.width/s.width)));var r=Ke(xe(o,ae(s=Q(s,Ze(s,n({visibleArea:s,type:"resize"}))))));return s.width<o.width&&(r.left=0),s.height<o.height&&(r.top=0),s=$(s=q(s,r),n({visibleArea:s,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,n=e.imageSize,o=e.imageRestriction,s=e.type,r={};return o==="fill-area"?r={left:0,top:0,right:n.width,bottom:n.height}:o==="fit-area"&&(M(i)>M(n)?(r={top:0,bottom:n.height},t&&s==="move"&&(t.width>n.width?(r.left=-(t.width-n.width)/2,r.right=n.width-r.left):(r.left=0,r.right=n.width))):(r={left:0,right:n.width},t&&s==="move"&&(t.height>n.height?(r.top=-(t.height-n.height)/2,r.bottom=n.height-r.top):(r.top=0,r.bottom=n.height)))),r}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,i={};return e.imageRestriction!=="none"&&(i={left:0,top:0,right:t.width,bottom:t.height}),i}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:O({},Ft)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=(function(t){return t*Math.PI/180})(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=gt(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:gt(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:H(this.minWidth)?0:Ue(this.minWidth),minHeight:H(this.minHeight)?0:Ue(this.minHeight),maxWidth:H(this.maxWidth)?1/0:Ue(this.maxWidth),maxHeight:H(this.maxHeight)?1/0:Ue(this.maxHeight)});if(e=(function(n){var o=n.areaRestrictions,s=n.sizeRestrictions,r=n.boundaries,a=n.positionRestrictions,l=R(R({},s),{minWidth:s.minWidth!==void 0?s.minWidth:0,minHeight:s.minHeight!==void 0?s.minHeight:0,maxWidth:s.maxWidth!==void 0?s.maxWidth:1/0,maxHeight:s.maxHeight!==void 0?s.maxHeight:1/0});a.left!==void 0&&a.right!==void 0&&(l.maxWidth=Math.min(l.maxWidth,a.right-a.left)),a.bottom!==void 0&&a.top!==void 0&&(l.maxHeight=Math.min(l.maxHeight,a.bottom-a.top));var c=vt(o),u=vi(r,c);return c.width<1/0&&(!l.maxWidth||l.maxWidth>u.width)&&(l.maxWidth=Math.min(l.maxWidth,u.width)),c.height<1/0&&(!l.maxHeight||l.maxHeight>u.height)&&(l.maxHeight=Math.min(l.maxHeight,u.height)),l.minWidth>l.maxWidth&&(l.minWidth=l.maxWidth,l.widthFrozen=!0),l.minHeight>l.maxHeight&&(l.minHeight=l.maxHeight,l.heightFrozen=!0),l})({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),i=vt(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,i.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,i.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:le(),image:j(le("image"),this.imageClass),stencil:le("stencil"),boundaries:j(le("boundaries"),this.boundariesClass),stretcher:j(le("stretcher")),background:j(le("background"),this.backgroundClass),foreground:j(le("foreground"),this.foregroundClass),imageWrapper:j(le("image-wrapper")),cropperWrapper:j(le("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,i=e.height,n=e.left,o=e.top;return{width:t/this.coefficient,height:i/this.coefficient,left:(n-this.visibleArea.left)/this.coefficient,top:(o-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},i={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},n=O(O({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),o={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-i.left-this.imageTransforms.translateX,"px, ").concat(-t.top-i.top-this.imageTransforms.translateY,"px)")+Ai(n)};return this.transitionsOptions.enabled&&(o.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),o}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick((function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(i){return e[i]!==t[i]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=pt(this.update,this.debounce),this.debouncedDisableTransitions=pt(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(O({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:O({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var i=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?O({},this.visibleArea):null,imageTransforms:t,get canvas(){return i.canvas?i.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?O({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.transitions,o=n===void 0||n;this.onManipulateImage(new Oe({},{factor:1/e,center:t}),{normalize:!1,transitions:o})},move:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.transitions,o=n===void 0||n;this.onManipulateImage(new Oe({left:e||0,top:t||0}),{normalize:!1,transitions:o})},setCoordinates:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.autoZoom,o=n===void 0||n,s=i.transitions,r=s===void 0||s;this.$nextTick((function(){t.imageLoaded?(t.transitionsActive||(r&&t.enableTransitions(),t.coordinates=t.applyTransform(e),o&&t.runAutoZoom("setCoordinates"),r&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e}))},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then((function(){e.onChange()})):this.resetVisibleArea().then((function(){e.onChange()}))},reset:function(){var e=this;return this.resetVisibleArea().then((function(){e.onChange(!1)}))},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){e(),t.awaiting=!1})))},prepareResult:function(e){return this.roundResult?(function(t){var i=t.coordinates,n=t.sizeRestrictions,o=t.positionRestrictions,s={width:Math.round(i.width),height:Math.round(i.height),left:Math.round(i.left),top:Math.round(i.top)};return s.width>n.maxWidth?s.width=Math.floor(i.width):s.width<n.minWidth&&(s.width=Math.ceil(i.width)),s.height>n.maxHeight?s.height=Math.floor(i.height):s.height<n.minHeight&&(s.height=Math.ceil(i.height)),$(s,o)})(O(O({},this.getPublicProperties()),{},{positionRestrictions:Ie(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,i,n){var o=this.autoZoomAlgorithm;o||(o=this.stencilSize?Fn:this.autoZoom?Hn:Wn);var s=o({event:{type:e,params:n},visibleArea:t,coordinates:i,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return O(O({},s),{},{changed:!Ht(s.visibleArea,t)||!Ht(s.coordinates,i)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transitions,n=i!==void 0&&i,o=Mn(t,rs),s=this.processAutoZoom(e,this.visibleArea,this.coordinates,o),r=s.visibleArea,a=s.coordinates,l=s.changed;n&&l&&this.enableTransitions(),this.visibleArea=r,this.coordinates=a,n&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return(function(t){var i=t.event,n=t.visibleArea,o=t.coefficient;if(i.type==="manipulateImage")return R(R({},i),{move:{left:i.move&&i.move.left?o*i.move.left:0,top:i.move&&i.move.top?o*i.move.top:0},scale:{factor:i.scale&&i.scale.factor?i.scale.factor:1,center:i.scale&&i.scale.center?{left:i.scale.center.left*o+n.left,top:i.scale.center.top*o+n.top}:null}});if(i.type==="resize"){var s=R(R({},i),{directions:R({},i.directions)});return re.forEach((function(a){s.directions[a]*=o})),s}if(i.type==="move"){var r=R(R({},i),{directions:R({},i.directions)});return kn.forEach((function(a){r.directions[a]*=o})),r}return i})(O(O({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,i=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?(function(a,l,c){var u=c.rotate,h=c.flip,f={width:l.naturalWidth,height:l.naturalHeight},g=bi(f,u),m=a.getContext("2d");a.height=g.height,a.width=g.width,m.save();var v=de(W(R({left:0,top:0},f)),u);return m.translate(-(v.left-g.width/2),-(v.top-g.height/2)),m.rotate(u*Math.PI/180),m.translate(h.horizontal?f.width:0,h.vertical?f.height:0),m.scale(h.horizontal?-1:1,h.vertical?-1:1),m.drawImage(l,0,0,f.width,f.height),m.restore(),a})(this.$refs.sourceCanvas,t,this.imageTransforms):t,n=O({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),o=function(a){return a.find((function(l){return c=l,!Number.isNaN(parseFloat(c))&&isFinite(c);var c}))},s=ce({sizeRestrictions:{minWidth:o([n.width,n.minWidth])||0,minHeight:o([n.height,n.minHeight])||0,maxWidth:o([n.width,n.maxWidth])||1/0,maxHeight:o([n.height,n.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(n.maxArea&&s.width*s.height>n.maxArea){var r=Math.sqrt(n.maxArea/(s.width*s.height));s={width:Math.round(r*s.width),height:Math.round(r*s.height)}}return(function(a,l,c,u,h){a.width=u?u.width:c.width,a.height=u?u.height:c.height;var f=a.getContext("2d");f.clearRect(0,0,a.width,a.height),h&&(h.imageSmoothingEnabled&&(f.imageSmoothingEnabled=h.imageSmoothingEnabled),h.imageSmoothingQuality&&(f.imageSmoothingQuality=h.imageSmoothingQuality),h.fillColor&&(f.fillStyle=h.fillColor,f.fillRect(0,0,a.width,a.height),f.save()));var g=c.left<0?-c.left:0,m=c.top<0?-c.top:0;f.drawImage(l,c.left+g,c.top+m,c.width,c.height,g*(a.width/c.width),m*(a.height/c.height),a.width,a.height)})(e,i,this.coordinates,s,n),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.visibleArea&&t?In(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,n=this.visibleArea&&t?Ie(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return jn({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:n,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?qn:Vn);var i=this.sizeRestrictions;i.minWidth,i.minHeight,i.maxWidth,i.maxHeight;var n=we(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,o=this.defaultPosition||$n,s=[n,function(r){var a=r.coordinates;return O({},we(o)?o({coordinates:a,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,ve(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout((function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then((function(){var n={cropper:i,imageSize:e.imageSize};if(we(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(n):e.defaultBoundaries==="fit"?e.boundaries=(function(o){var s=o.cropper,r=o.imageSize,a=s.clientHeight,l=s.clientWidth,c=a,u=r.width*a/r.height;return u>l&&(u=l,c=r.height*l/r.width),{width:u,height:c}})(n):e.boundaries=(function(o){var s=o.cropper;return{width:s.clientWidth,height:s.clientHeight}})(n),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=O(O({},this.defaultImageTransforms),{},{flip:O({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then((function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,i,n,o,s,r,a=e.defaultVisibleArea||Xn;e.visibleArea=we(a)?a({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},i=t.visibleArea,n=t.boundaries,o=t.getAreaRestrictions,s=R({},i),r=M(n),s.width/s.height!==r&&(s.height=s.width/r),$(s,o({visibleArea:s,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")})).catch((function(){e.visibleArea=null}))},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then((function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")})).catch((function(){e.visibleArea=null}))},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if((function(o){if(It(o))return!1;var s=window.location,r=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(o)||[],a={protocol:r[1]||"",host:r[2]||"",port:r[3]||""},l=function(c){return c.port||((c.protocol||s.protocol)==="http"?80:433)};return!(!a.protocol&&!a.host&&!a.port||a.protocol&&a.protocol==s.protocol&&a.host&&a.host==s.host&&a.host&&l(a)==l(s))})(this.src)){var i=H(this.crossOrigin)?this.canvas:this.crossOrigin;i===!0&&(i="anonymous"),this.imageAttributes.crossOrigin=i||null}if(this.checkOrientation){var n=(e=this.src,new Promise((function(o){ss(e).then((function(s){var r=os(s);o(s?{source:e,arrayBuffer:s,orientation:r}:{source:e,arrayBuffer:null,orientation:null})})).catch((function(s){console.warn(s),o({source:e,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){n.then(t.onParseImage)}),this.transitionTime)}else setTimeout((function(){t.onParseImage({source:t.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then((function(){e.$emit("ready"),e.onChange(!1)})))},onParseImage:function(e){var t=this,i=e.source,n=e.arrayBuffer,o=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,n&&o&&o>1?di(i)||!It(i)?(this.imageAttributes.src=URL.createObjectURL(new Blob([n])),this.imageAttributes.revoke=!0):this.imageAttributes.src=(function(s){for(var r=[],a=new Uint8Array(s);a.length>0;){var l=a.subarray(0,8192);r.push(String.fromCharCode.apply(null,Array.from?Array.from(l):l.slice())),a=a.subarray(8192)}return"data:image/jpeg;base64,"+btoa(r.join(""))})(n):this.imageAttributes.src=i,we(this.defaultTransforms)?this.appliedImageTransforms=ct(this.defaultTransforms()):He(this.defaultTransforms)?this.appliedImageTransforms=ct(this.defaultTransforms):this.appliedImageTransforms=(function(s){var r=ct({});if(s)switch(s){case 2:r.flip.horizontal=!0;break;case 3:r.rotate=-180;break;case 4:r.flip.vertical=!0;break;case 5:r.rotate=90,r.flip.vertical=!0;break;case 6:r.rotate=90;break;case 7:r.rotate=90,r.flip.horizontal=!0;break;case 8:r.rotate=-90}return r})(o),this.defaultImageTransforms=O(O({},this.appliedImageTransforms),{},{flip:O({},this.appliedImageTransforms.flip)}),this.$nextTick((function(){var s=t.$refs.image;s&&s.complete&&((function(r){return!!r.naturalWidth})(s)?t.onSuccessLoadImage():t.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender((function(){t.coordinates=t.moveAlgorithm(O(O({},t.getPublicProperties()),{},{positionRestrictions:Ie(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()}))},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var i=t.sizeRestrictions,n=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(O(O({},t.getPublicProperties()),{},{positionRestrictions:Ie(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(i.maxWidth,t.visibleArea.width),maxHeight:Math.min(i.maxHeight,t.visibleArea.height),minWidth:Math.max(i.minWidth,n),minHeight:Math.max(i.minHeight,n)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1}))},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var i=t.transitions,n=i!==void 0&&i,o=t.normalize,s=o===void 0||o;n&&this.enableTransitions();var r=Yn(O(O({},this.getPublicProperties()),{},{event:s?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),a=r.visibleArea,l=r.coordinates;this.visibleArea=a,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),n&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,i=e.type,n=i===void 0?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:n})},getAspectRatio:function(e){var t,i,n=this.stencilProps,o=n.aspectRatio,s=n.minAspectRatio,r=n.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();t=a.minimum,i=a.maximum}if(H(t)&&(t=H(o)?s:o),H(i)&&(i=H(o)?r:o),!e&&(H(t)||H(i))){var l=this.getStencilSize(),c=l?M(l):null;H(t)&&(t=jt(c)?c:void 0),H(i)&&(i=jt(c)?c:void 0)}return{minimum:t,maximum:i}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,i=e.stencilSize,n=e.aspectRatio,at(M(o=we(i)?i({boundaries:t,aspectRatio:n}):i),n)&&(o=ce({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:o.width,height:o.height,aspectRatio:{minimum:n.minimum,maximum:n.maximum}})),(o.width>t.width||o.height>t.height)&&(o=ce({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:o.width,height:o.height,aspectRatio:{minimum:M(o),maximum:M(o)}})),o;var e,t,i,n,o},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return O({},Ft)},flip:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.transitions,o=n===void 0||n;if(!this.transitionsActive){o&&this.enableTransitions();var s=O({},this.imageTransforms.flip),r=Kn({flip:{horizontal:e?!s.horizontal:s.horizontal,vertical:t?!s.vertical:s.vertical},previousFlip:s,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=r.visibleArea,l=r.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=l,this.onChange(),o&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transitions,n=i===void 0||i;if(!this.transitionsActive){n&&this.enableTransitions();var o=O({},this.imageSize);this.appliedImageTransforms.rotate+=e;var s=Jn({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:o,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),r=s.visibleArea,a=s.coordinates,l=this.processAutoZoom("rotateImage",r,a);r=l.visibleArea,a=l.coordinates,this.visibleArea=r,this.coordinates=a,this.onChange(),n&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},as={key:0,ref:"canvas",style:{display:"none"}},ls={key:1,ref:"sourceCanvas",style:{display:"none"}};Ti.render=function(e,t,i,n,o,s){return E(),P("div",{ref:"cropper",class:s.classes.cropper},[y("div",{ref:"stretcher",class:s.classes.stretcher},null,2),y("div",{class:s.classes.boundaries,style:s.boundariesStyle},[(E(),P(qe(i.backgroundWrapperComponent),{class:s.classes.cropperWrapper,"wheel-resize":s.settings.resizeImage.wheel,"touch-resize":s.settings.resizeImage.touch,"touch-move":s.settings.moveImage.touch,"mouse-move":s.settings.moveImage.mouse,onMove:s.onManipulateImage,onResize:s.onManipulateImage},{default:x((function(){return[y("div",{class:s.classes.background,style:s.boundariesStyle},null,6),y("div",{class:s.classes.imageWrapper},[y("img",{ref:"image",crossorigin:o.imageAttributes.crossOrigin,src:o.imageAttributes.src,class:s.classes.image,style:s.imageStyle,onMousedown:t[1]||(t[1]=nn((function(){}),["prevent"]))},null,46,["crossorigin","src"])],2),y("div",{class:s.classes.foreground,style:s.boundariesStyle},null,6),ai((E(),P(qe(i.stencilComponent),ci({ref:"stencil",image:s.image,coordinates:o.coordinates,"stencil-coordinates":s.stencilCoordinates,transitions:s.transitionsOptions},i.stencilProps,{onResize:s.onResize,onResizeEnd:s.onResizeEnd,onMove:s.onMove,onMoveEnd:s.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[li,o.imageLoaded]]),i.canvas?(E(),P("canvas",as,null,512)):Me("",!0),i.canvas?(E(),P("canvas",ls,null,512)):Me("",!0)]})),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const cs=["accept"],us={class:"thumbnail-dialog__body"},hs={class:"thumbnail-dialog__footer flex justify-flex-end"},ds=["src"],fs={key:0,class:"upload-file custom-button-upload"},ms={key:2},ps=ui({__name:"index",props:{width:{type:[String,Number],default:300},height:{type:[String,Number],default:300},typeUpload:{type:String,default:"file-upload",validator:e=>["file-upload","avatar-upload","avatar-upload-custom"].includes(e)},accept:{type:String,default:"image/png, image/jpeg, image/jpg"}},emits:["onResult"],setup(e,{expose:t,emit:i}){const n=e,o=i,s=Z(null),r=Z(null),a=Z(!1),l=Z(!1),c=Xe({src:null,type:null}),u=Xe({isSubmitting:!1}),h=Z(null),f=Z(null),g=Z(null);Z(null);const m=Z(0),v=Z(!1);function w(T,_=null){const K=new Uint8Array(T).subarray(0,4);let N="";for(let B=0;B<K.length;B++)N+=K[B].toString(16);switch(N){case"89504e47":return"image/png";case"47494638":return"image/gif";case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":return"image/jpeg";default:return _}}const z=T=>{l.value=!0,m.value=0,v.value=!1,s.value&&(s.value.value="",s.value.click())},L=()=>({width:Number(n.width),height:Number(n.height)}),D=()=>{try{u.isSubmitting=!0;const{coordinates:T,canvas:_}=r.value.getResult();f.value=_.toDataURL(),I(T)}catch{return!1}finally{l.value=!1}},I=T=>{setTimeout(async()=>{await F(T),a.value=!1,u.isSubmitting=!1},50)},F=T=>new Promise(_=>{const K=new Image;K.src=f.value||"";const N=document.createElement("canvas"),B=Number(n.width)/T.width;N.width=T.width*B*2,N.height=T.height*B*2;const ne=N.getContext("2d");ne.save(),ne.drawImage(K,0,0,N.width,N.height),ne.restore();const fe=N.toDataURL("image/webp",.98);N.toBlob(Te=>{!Te||!h.value||(g.value=new File([Te],m.value?h.value.name:`${h.value.name}.webp`,{type:Te.type}),o("onResult",g.value),_(fe))},m.value?h.value?.type:"image/webp")}),S=(T,_)=>{const N=T.target.files;if(!N||!N[0])return;a.value=!0,v.value=_,h.value=N[0],c.src&&URL.revokeObjectURL(c.src);const B=URL.createObjectURL(N[0]),ne=new FileReader;ne.onload=fe=>{c.src=B,c.type=w(fe.target?.result,N[0].type)},ne.readAsArrayBuffer(N[0])};return t({resetImage:()=>{c.src=null,c.type=null,f.value=null,g.value=null,s.value&&(s.value.value="")}}),(T,_)=>{const K=k("el-button"),N=k("el-dialog");return E(),ee("div",null,[p("input",{style:{display:"none"},type:"file",ref_key:"fileInput",ref:s,accept:e.accept,onChange:_[0]||(_[0]=B=>S(B,!1))},null,40,cs),y(N,{"custom-class":"dialog-cropper",modelValue:a.value,"onUpdate:modelValue":_[2]||(_[2]=B=>a.value=B),width:`${L().width+10}px !important`,class:"thumbnail-dialog"},{footer:x(()=>[p("div",hs,[y(K,{type:"info",onClick:_[1]||(_[1]=B=>a.value=!1),size:"small"},{default:x(()=>_[3]||(_[3]=[J(" Hủy ",-1)])),_:1,__:[3]}),y(K,{size:"small",loading:u.isSubmitting,type:"primary",onClick:D},{default:x(()=>_[4]||(_[4]=[J(" Xác nhận ",-1)])),_:1,__:[4]},8,["loading"])])]),default:x(()=>[p("div",us,[y(he(Ti),{ref_key:"cropperRef",ref:r,src:c.src,"image-restriction":"stencil","default-size":L,"stencil-props":{handlers:{},movable:!1,resizable:!1,aspectRatio:Number(e.width)/Number(e.height)},"stencil-size":{width:e.width,height:e.height}},null,8,["src","stencil-props","stencil-size"])])]),_:1},8,["modelValue","width"]),p("img",{src:f.value??void 0,style:{display:"none"}},null,8,ds),e.typeUpload==="file-upload"?(E(),ee("div",fs,[y(K,{type:"primary",onClick:z,size:"small"},{default:x(()=>[_[5]||(_[5]=J(" Chọn tệp ",-1)),ue(T.$slots,"default")]),_:3,__:[5]})])):e.typeUpload==="avatar-upload"?(E(),ee("div",{key:1,class:"avatar-upload",onClick:z},_[6]||(_[6]=[p("i",{class:"el-icon-plus"},null,-1)]))):e.typeUpload==="avatar-upload-custom"?(E(),ee("div",ms,[p("div",{class:"fit-content",onClick:z},[ue(T.$slots,"default")])])):Me("",!0)])}}}),gs=yn(An);async function vs(e){try{return console.log("project :",e),(await bn(wn(gs,"posts"),{...e,createdAt:Rn.now()})).id}catch(t){throw t}}function Ci(e,t){return function(){return e.apply(t,arguments)}}const{toString:bs}=Object.prototype,{getPrototypeOf:Lt}=Object,{iterator:Qe,toStringTag:Oi}=Symbol,et=(e=>t=>{const i=bs.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ie=e=>(e=e.toLowerCase(),t=>et(t)===e),tt=e=>t=>typeof t===e,{isArray:Ee}=Array,Le=tt("undefined");function Pe(e){return e!==null&&!Le(e)&&e.constructor!==null&&!Le(e.constructor)&&X(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Mi=ie("ArrayBuffer");function ws(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Mi(e.buffer),t}const ys=tt("string"),X=tt("function"),_i=tt("number"),De=e=>e!==null&&typeof e=="object",Rs=e=>e===!0||e===!1,We=e=>{if(et(e)!=="object")return!1;const t=Lt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Oi in e)&&!(Qe in e)},As=e=>{if(!De(e)||Pe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Ss=ie("Date"),xs=ie("File"),Es=ie("Blob"),zs=ie("FileList"),Ts=e=>De(e)&&X(e.pipe),Cs=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||X(e.append)&&((t=et(e))==="formdata"||t==="object"&&X(e.toString)&&e.toString()==="[object FormData]"))},Os=ie("URLSearchParams"),[Ms,_s,Ls,Ps]=["ReadableStream","Request","Response","Headers"].map(ie),Ds=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ne(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),Ee(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{if(Pe(e))return;const s=i?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let a;for(n=0;n<r;n++)a=s[n],t.call(null,e[a],a,e)}}function Li(e,t){if(Pe(e))return null;t=t.toLowerCase();const i=Object.keys(e);let n=i.length,o;for(;n-- >0;)if(o=i[n],t===o.toLowerCase())return o;return null}const pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pi=e=>!Le(e)&&e!==pe;function yt(){const{caseless:e}=Pi(this)&&this||{},t={},i=(n,o)=>{const s=e&&Li(t,o)||o;We(t[s])&&We(n)?t[s]=yt(t[s],n):We(n)?t[s]=yt({},n):Ee(n)?t[s]=n.slice():t[s]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Ne(arguments[n],i);return t}const Ns=(e,t,i,{allOwnKeys:n}={})=>(Ne(t,(o,s)=>{i&&X(o)?e[s]=Ci(o,i):e[s]=o},{allOwnKeys:n}),e),Bs=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ks=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Us=(e,t,i,n)=>{let o,s,r;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)r=o[s],(!n||n(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=i!==!1&&Lt(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},Is=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},js=e=>{if(!e)return null;if(Ee(e))return e;let t=e.length;if(!_i(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},Fs=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Lt(Uint8Array)),Hs=(e,t)=>{const n=(e&&e[Qe]).call(e);let o;for(;(o=n.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},Ws=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},$s=ie("HTMLFormElement"),Vs=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,o){return n.toUpperCase()+o}),Xt=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),qs=ie("RegExp"),Di=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};Ne(i,(o,s)=>{let r;(r=t(o,s,e))!==!1&&(n[s]=r||o)}),Object.defineProperties(e,n)},Xs=e=>{Di(e,(t,i)=>{if(X(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(X(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Ys=(e,t)=>{const i={},n=o=>{o.forEach(s=>{i[s]=!0})};return Ee(e)?n(e):n(String(e).split(t)),i},Js=()=>{},Ks=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Zs(e){return!!(e&&X(e.append)&&e[Oi]==="FormData"&&e[Qe])}const Gs=e=>{const t=new Array(10),i=(n,o)=>{if(De(n)){if(t.indexOf(n)>=0)return;if(Pe(n))return n;if(!("toJSON"in n)){t[o]=n;const s=Ee(n)?[]:{};return Ne(n,(r,a)=>{const l=i(r,o+1);!Le(l)&&(s[a]=l)}),t[o]=void 0,s}}return n};return i(e,0)},Qs=ie("AsyncFunction"),eo=e=>e&&(De(e)||X(e))&&X(e.then)&&X(e.catch),Ni=((e,t)=>e?setImmediate:t?((i,n)=>(pe.addEventListener("message",({source:o,data:s})=>{o===pe&&s===i&&n.length&&n.shift()()},!1),o=>{n.push(o),pe.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",X(pe.postMessage)),to=typeof queueMicrotask<"u"?queueMicrotask.bind(pe):typeof process<"u"&&process.nextTick||Ni,io=e=>e!=null&&X(e[Qe]),d={isArray:Ee,isArrayBuffer:Mi,isBuffer:Pe,isFormData:Cs,isArrayBufferView:ws,isString:ys,isNumber:_i,isBoolean:Rs,isObject:De,isPlainObject:We,isEmptyObject:As,isReadableStream:Ms,isRequest:_s,isResponse:Ls,isHeaders:Ps,isUndefined:Le,isDate:Ss,isFile:xs,isBlob:Es,isRegExp:qs,isFunction:X,isStream:Ts,isURLSearchParams:Os,isTypedArray:Fs,isFileList:zs,forEach:Ne,merge:yt,extend:Ns,trim:Ds,stripBOM:Bs,inherits:ks,toFlatObject:Us,kindOf:et,kindOfTest:ie,endsWith:Is,toArray:js,forEachEntry:Hs,matchAll:Ws,isHTMLForm:$s,hasOwnProperty:Xt,hasOwnProp:Xt,reduceDescriptors:Di,freezeMethods:Xs,toObjectSet:Ys,toCamelCase:Vs,noop:Js,toFiniteNumber:Ks,findKey:Li,global:pe,isContextDefined:Pi,isSpecCompliantForm:Zs,toJSONObject:Gs,isAsyncFn:Qs,isThenable:eo,setImmediate:Ni,asap:to,isIterable:io};function A(e,t,i,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}d.inherits(A,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}});const Bi=A.prototype,ki={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ki[e]={value:e}});Object.defineProperties(A,ki);Object.defineProperty(Bi,"isAxiosError",{value:!0});A.from=(e,t,i,n,o,s)=>{const r=Object.create(Bi);return d.toFlatObject(e,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),A.call(r,e.message,t,i,n,o),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const no=null;function Rt(e){return d.isPlainObject(e)||d.isArray(e)}function Ui(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function Yt(e,t,i){return e?e.concat(t).map(function(o,s){return o=Ui(o),!i&&s?"["+o+"]":o}).join(i?".":""):t}function so(e){return d.isArray(e)&&!e.some(Rt)}const oo=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function it(e,t,i){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=d.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!d.isUndefined(w[v])});const n=i.metaTokens,o=i.visitor||u,s=i.dots,r=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(o))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(d.isDate(m))return m.toISOString();if(d.isBoolean(m))return m.toString();if(!l&&d.isBlob(m))throw new A("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(m)||d.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,w){let z=m;if(m&&!w&&typeof m=="object"){if(d.endsWith(v,"{}"))v=n?v:v.slice(0,-2),m=JSON.stringify(m);else if(d.isArray(m)&&so(m)||(d.isFileList(m)||d.endsWith(v,"[]"))&&(z=d.toArray(m)))return v=Ui(v),z.forEach(function(D,I){!(d.isUndefined(D)||D===null)&&t.append(r===!0?Yt([v],I,s):r===null?v:v+"[]",c(D))}),!1}return Rt(m)?!0:(t.append(Yt(w,v,s),c(m)),!1)}const h=[],f=Object.assign(oo,{defaultVisitor:u,convertValue:c,isVisitable:Rt});function g(m,v){if(!d.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(m),d.forEach(m,function(z,L){(!(d.isUndefined(z)||z===null)&&o.call(t,z,d.isString(L)?L.trim():L,v,f))===!0&&g(z,v?v.concat(L):[L])}),h.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return g(e),t}function Jt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Pt(e,t){this._pairs=[],e&&it(e,this,t)}const Ii=Pt.prototype;Ii.append=function(t,i){this._pairs.push([t,i])};Ii.toString=function(t){const i=t?function(n){return t.call(this,n,Jt)}:Jt;return this._pairs.map(function(o){return i(o[0])+"="+i(o[1])},"").join("&")};function ro(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ji(e,t,i){if(!t)return e;const n=i&&i.encode||ro;d.isFunction(i)&&(i={serialize:i});const o=i&&i.serialize;let s;if(o?s=o(t,i):s=d.isURLSearchParams(t)?t.toString():new Pt(t,i).toString(n),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Kt{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Fi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ao=typeof URLSearchParams<"u"?URLSearchParams:Pt,lo=typeof FormData<"u"?FormData:null,co=typeof Blob<"u"?Blob:null,uo={isBrowser:!0,classes:{URLSearchParams:ao,FormData:lo,Blob:co},protocols:["http","https","file","blob","url","data"]},Dt=typeof window<"u"&&typeof document<"u",At=typeof navigator=="object"&&navigator||void 0,ho=Dt&&(!At||["ReactNative","NativeScript","NS"].indexOf(At.product)<0),fo=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mo=Dt&&window.location.href||"http://localhost",po=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dt,hasStandardBrowserEnv:ho,hasStandardBrowserWebWorkerEnv:fo,navigator:At,origin:mo},Symbol.toStringTag,{value:"Module"})),V={...po,...uo};function go(e,t){return it(e,new V.classes.URLSearchParams,{visitor:function(i,n,o,s){return V.isNode&&d.isBuffer(i)?(this.append(n,i.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function vo(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bo(e){const t={},i=Object.keys(e);let n;const o=i.length;let s;for(n=0;n<o;n++)s=i[n],t[s]=e[s];return t}function Hi(e){function t(i,n,o,s){let r=i[s++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=s>=i.length;return r=!r&&d.isArray(o)?o.length:r,l?(d.hasOwnProp(o,r)?o[r]=[o[r],n]:o[r]=n,!a):((!o[r]||!d.isObject(o[r]))&&(o[r]=[]),t(i,n,o[r],s)&&d.isArray(o[r])&&(o[r]=bo(o[r])),!a)}if(d.isFormData(e)&&d.isFunction(e.entries)){const i={};return d.forEachEntry(e,(n,o)=>{t(vo(n),o,i,0)}),i}return null}function wo(e,t,i){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}const Be={transitional:Fi,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",o=n.indexOf("application/json")>-1,s=d.isObject(t);if(s&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return o?JSON.stringify(Hi(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return go(t,this.formSerializer).toString();if((a=d.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return it(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||o?(i.setContentType("application/json",!1),wo(t)):t}],transformResponse:[function(t){const i=this.transitional||Be.transitional,n=i&&i.forcedJSONParsing,o=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(n&&!this.responseType||o)){const r=!(i&&i.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?A.from(a,A.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V.classes.FormData,Blob:V.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{Be.headers[e]={}});const yo=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ro=e=>{const t={};let i,n,o;return e&&e.split(`
`).forEach(function(r){o=r.indexOf(":"),i=r.substring(0,o).trim().toLowerCase(),n=r.substring(o+1).trim(),!(!i||t[i]&&yo[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},Zt=Symbol("internals");function Ce(e){return e&&String(e).trim().toLowerCase()}function $e(e){return e===!1||e==null?e:d.isArray(e)?e.map($e):String(e)}function Ao(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const So=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ht(e,t,i,n,o){if(d.isFunction(n))return n.call(this,t,i);if(o&&(t=i),!!d.isString(t)){if(d.isString(n))return t.indexOf(n)!==-1;if(d.isRegExp(n))return n.test(t)}}function xo(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function Eo(e,t){const i=d.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(o,s,r){return this[n].call(this,t,o,s,r)},configurable:!0})})}let Y=class{constructor(t){t&&this.set(t)}set(t,i,n){const o=this;function s(a,l,c){const u=Ce(l);if(!u)throw new Error("header name must be a non-empty string");const h=d.findKey(o,u);(!h||o[h]===void 0||c===!0||c===void 0&&o[h]!==!1)&&(o[h||l]=$e(a))}const r=(a,l)=>d.forEach(a,(c,u)=>s(c,u,l));if(d.isPlainObject(t)||t instanceof this.constructor)r(t,i);else if(d.isString(t)&&(t=t.trim())&&!So(t))r(Ro(t),i);else if(d.isObject(t)&&d.isIterable(t)){let a={},l,c;for(const u of t){if(!d.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?d.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}r(a,i)}else t!=null&&s(i,t,n);return this}get(t,i){if(t=Ce(t),t){const n=d.findKey(this,t);if(n){const o=this[n];if(!i)return o;if(i===!0)return Ao(o);if(d.isFunction(i))return i.call(this,o,n);if(d.isRegExp(i))return i.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Ce(t),t){const n=d.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||ht(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let o=!1;function s(r){if(r=Ce(r),r){const a=d.findKey(n,r);a&&(!i||ht(n,n[a],a,i))&&(delete n[a],o=!0)}}return d.isArray(t)?t.forEach(s):s(t),o}clear(t){const i=Object.keys(this);let n=i.length,o=!1;for(;n--;){const s=i[n];(!t||ht(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const i=this,n={};return d.forEach(this,(o,s)=>{const r=d.findKey(n,s);if(r){i[r]=$e(o),delete i[s];return}const a=t?xo(s):String(s).trim();a!==s&&delete i[s],i[a]=$e(o),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return d.forEach(this,(n,o)=>{n!=null&&n!==!1&&(i[o]=t&&d.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[Zt]=this[Zt]={accessors:{}}).accessors,o=this.prototype;function s(r){const a=Ce(r);n[a]||(Eo(o,r),n[a]=!0)}return d.isArray(t)?t.forEach(s):s(t),this}};Y.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(Y.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});d.freezeMethods(Y);function dt(e,t){const i=this||Be,n=t||i,o=Y.from(n.headers);let s=n.data;return d.forEach(e,function(a){s=a.call(i,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Wi(e){return!!(e&&e.__CANCEL__)}function ze(e,t,i){A.call(this,e??"canceled",A.ERR_CANCELED,t,i),this.name="CanceledError"}d.inherits(ze,A,{__CANCEL__:!0});function $i(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new A("Request failed with status code "+i.status,[A.ERR_BAD_REQUEST,A.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function zo(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function To(e,t){e=e||10;const i=new Array(e),n=new Array(e);let o=0,s=0,r;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[s];r||(r=c),i[o]=l,n[o]=c;let h=s,f=0;for(;h!==o;)f+=i[h++],h=h%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-r<t)return;const g=u&&c-u;return g?Math.round(f*1e3/g):void 0}}function Co(e,t){let i=0,n=1e3/t,o,s;const r=(c,u=Date.now())=>{i=u,o=null,s&&(clearTimeout(s),s=null),e(...c)};return[(...c)=>{const u=Date.now(),h=u-i;h>=n?r(c,u):(o=c,s||(s=setTimeout(()=>{s=null,r(o)},n-h)))},()=>o&&r(o)]}const Ye=(e,t,i=3)=>{let n=0;const o=To(50,250);return Co(s=>{const r=s.loaded,a=s.lengthComputable?s.total:void 0,l=r-n,c=o(l),u=r<=a;n=r;const h={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-r)/c:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},i)},Gt=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},Qt=e=>(...t)=>d.asap(()=>e(...t)),Oo=V.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,V.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(V.origin),V.navigator&&/(msie|trident)/i.test(V.navigator.userAgent)):()=>!0,Mo=V.hasStandardBrowserEnv?{write(e,t,i,n,o,s){const r=[e+"="+encodeURIComponent(t)];d.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),d.isString(n)&&r.push("path="+n),d.isString(o)&&r.push("domain="+o),s===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _o(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Lo(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Vi(e,t,i){let n=!_o(t);return e&&(n||i==!1)?Lo(e,t):t}const ei=e=>e instanceof Y?{...e}:e;function be(e,t){t=t||{};const i={};function n(c,u,h,f){return d.isPlainObject(c)&&d.isPlainObject(u)?d.merge.call({caseless:f},c,u):d.isPlainObject(u)?d.merge({},u):d.isArray(u)?u.slice():u}function o(c,u,h,f){if(d.isUndefined(u)){if(!d.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function s(c,u){if(!d.isUndefined(u))return n(void 0,u)}function r(c,u){if(d.isUndefined(u)){if(!d.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,h){if(h in t)return n(c,u);if(h in e)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(c,u,h)=>o(ei(c),ei(u),h,!0)};return d.forEach(Object.keys({...e,...t}),function(u){const h=l[u]||o,f=h(e[u],t[u],u);d.isUndefined(f)&&h!==a||(i[u]=f)}),i}const qi=e=>{const t=be({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:s,headers:r,auth:a}=t;t.headers=r=Y.from(r),t.url=ji(Vi(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(d.isFormData(i)){if(V.hasStandardBrowserEnv||V.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((l=r.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];r.setContentType([c||"multipart/form-data",...u].join("; "))}}if(V.hasStandardBrowserEnv&&(n&&d.isFunction(n)&&(n=n(t)),n||n!==!1&&Oo(t.url))){const c=o&&s&&Mo.read(s);c&&r.set(o,c)}return t},Po=typeof XMLHttpRequest<"u",Do=Po&&function(e){return new Promise(function(i,n){const o=qi(e);let s=o.data;const r=Y.from(o.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=o,u,h,f,g,m;function v(){g&&g(),m&&m(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(o.method.toUpperCase(),o.url,!0),w.timeout=o.timeout;function z(){if(!w)return;const D=Y.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),F={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:D,config:e,request:w};$i(function(b){i(b),v()},function(b){n(b),v()},F),w=null}"onloadend"in w?w.onloadend=z:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(z)},w.onabort=function(){w&&(n(new A("Request aborted",A.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new A("Network Error",A.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let I=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const F=o.transitional||Fi;o.timeoutErrorMessage&&(I=o.timeoutErrorMessage),n(new A(I,F.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,e,w)),w=null},s===void 0&&r.setContentType(null),"setRequestHeader"in w&&d.forEach(r.toJSON(),function(I,F){w.setRequestHeader(F,I)}),d.isUndefined(o.withCredentials)||(w.withCredentials=!!o.withCredentials),a&&a!=="json"&&(w.responseType=o.responseType),c&&([f,m]=Ye(c,!0),w.addEventListener("progress",f)),l&&w.upload&&([h,g]=Ye(l),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",g)),(o.cancelToken||o.signal)&&(u=D=>{w&&(n(!D||D.type?new ze(null,e,w):D),w.abort(),w=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const L=zo(o.url);if(L&&V.protocols.indexOf(L)===-1){n(new A("Unsupported protocol "+L+":",A.ERR_BAD_REQUEST,e));return}w.send(s||null)})},No=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let n=new AbortController,o;const s=function(c){if(!o){o=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof A?u:new ze(u instanceof Error?u.message:u))}};let r=t&&setTimeout(()=>{r=null,s(new A(`timeout ${t} of ms exceeded`,A.ETIMEDOUT))},t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>d.asap(a),l}},Bo=function*(e,t){let i=e.byteLength;if(i<t){yield e;return}let n=0,o;for(;n<i;)o=n+t,yield e.slice(n,o),n=o},ko=async function*(e,t){for await(const i of Uo(e))yield*Bo(i,t)},Uo=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:i,value:n}=await t.read();if(i)break;yield n}}finally{await t.cancel()}},ti=(e,t,i,n)=>{const o=ko(e,t);let s=0,r,a=l=>{r||(r=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await o.next();if(c){a(),l.close();return}let h=u.byteLength;if(i){let f=s+=h;i(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),o.return()}},{highWaterMark:2})},nt=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Xi=nt&&typeof ReadableStream=="function",Io=nt&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Yi=(e,...t)=>{try{return!!e(...t)}catch{return!1}},jo=Xi&&Yi(()=>{let e=!1;const t=new Request(V.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ii=64*1024,St=Xi&&Yi(()=>d.isReadableStream(new Response("").body)),Je={stream:St&&(e=>e.body)};nt&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Je[t]&&(Je[t]=d.isFunction(e[t])?i=>i[t]():(i,n)=>{throw new A(`Response type '${t}' is not supported`,A.ERR_NOT_SUPPORT,n)})})})(new Response);const Fo=async e=>{if(e==null)return 0;if(d.isBlob(e))return e.size;if(d.isSpecCompliantForm(e))return(await new Request(V.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(d.isArrayBufferView(e)||d.isArrayBuffer(e))return e.byteLength;if(d.isURLSearchParams(e)&&(e=e+""),d.isString(e))return(await Io(e)).byteLength},Ho=async(e,t)=>{const i=d.toFiniteNumber(e.getContentLength());return i??Fo(t)},Wo=nt&&(async e=>{let{url:t,method:i,data:n,signal:o,cancelToken:s,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=qi(e);c=c?(c+"").toLowerCase():"text";let g=No([o,s&&s.toAbortSignal()],r),m;const v=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(l&&jo&&i!=="get"&&i!=="head"&&(w=await Ho(u,n))!==0){let F=new Request(t,{method:"POST",body:n,duplex:"half"}),S;if(d.isFormData(n)&&(S=F.headers.get("content-type"))&&u.setContentType(S),F.body){const[b,T]=Gt(w,Ye(Qt(l)));n=ti(F.body,ii,b,T)}}d.isString(h)||(h=h?"include":"omit");const z="credentials"in Request.prototype;m=new Request(t,{...f,signal:g,method:i.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:z?h:void 0});let L=await fetch(m,f);const D=St&&(c==="stream"||c==="response");if(St&&(a||D&&v)){const F={};["status","statusText","headers"].forEach(_=>{F[_]=L[_]});const S=d.toFiniteNumber(L.headers.get("content-length")),[b,T]=a&&Gt(S,Ye(Qt(a),!0))||[];L=new Response(ti(L.body,ii,b,()=>{T&&T(),v&&v()}),F)}c=c||"text";let I=await Je[d.findKey(Je,c)||"text"](L,e);return!D&&v&&v(),await new Promise((F,S)=>{$i(F,S,{data:I,headers:Y.from(L.headers),status:L.status,statusText:L.statusText,config:e,request:m})})}catch(z){throw v&&v(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new A("Network Error",A.ERR_NETWORK,e,m),{cause:z.cause||z}):A.from(z,z&&z.code,e,m)}}),xt={http:no,xhr:Do,fetch:Wo};d.forEach(xt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ni=e=>`- ${e}`,$o=e=>d.isFunction(e)||e===null||e===!1,Ji={getAdapter:e=>{e=d.isArray(e)?e:[e];const{length:t}=e;let i,n;const o={};for(let s=0;s<t;s++){i=e[s];let r;if(n=i,!$o(i)&&(n=xt[(r=String(i)).toLowerCase()],n===void 0))throw new A(`Unknown adapter '${r}'`);if(n)break;o[r||"#"+s]=n}if(!n){const s=Object.entries(o).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let r=t?s.length>1?`since :
`+s.map(ni).join(`
`):" "+ni(s[0]):"as no adapter specified";throw new A("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n},adapters:xt};function ft(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ze(null,e)}function si(e){return ft(e),e.headers=Y.from(e.headers),e.data=dt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ji.getAdapter(e.adapter||Be.adapter)(e).then(function(n){return ft(e),n.data=dt.call(e,e.transformResponse,n),n.headers=Y.from(n.headers),n},function(n){return Wi(n)||(ft(e),n&&n.response&&(n.response.data=dt.call(e,e.transformResponse,n.response),n.response.headers=Y.from(n.response.headers))),Promise.reject(n)})}const Ki="1.11.0",st={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{st[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const oi={};st.transitional=function(t,i,n){function o(s,r){return"[Axios v"+Ki+"] Transitional option '"+s+"'"+r+(n?". "+n:"")}return(s,r,a)=>{if(t===!1)throw new A(o(r," has been removed"+(i?" in "+i:"")),A.ERR_DEPRECATED);return i&&!oi[r]&&(oi[r]=!0,console.warn(o(r," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(s,r,a):!0}};st.spelling=function(t){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Vo(e,t,i){if(typeof e!="object")throw new A("options must be an object",A.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const s=n[o],r=t[s];if(r){const a=e[s],l=a===void 0||r(a,s,e);if(l!==!0)throw new A("option "+s+" must be "+l,A.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new A("Unknown option "+s,A.ERR_BAD_OPTION)}}const Ve={assertOptions:Vo,validators:st},se=Ve.validators;let ge=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Kt,response:new Kt}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=be(this.defaults,i);const{transitional:n,paramsSerializer:o,headers:s}=i;n!==void 0&&Ve.assertOptions(n,{silentJSONParsing:se.transitional(se.boolean),forcedJSONParsing:se.transitional(se.boolean),clarifyTimeoutError:se.transitional(se.boolean)},!1),o!=null&&(d.isFunction(o)?i.paramsSerializer={serialize:o}:Ve.assertOptions(o,{encode:se.function,serialize:se.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Ve.assertOptions(i,{baseUrl:se.spelling("baseURL"),withXsrfToken:se.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let r=s&&d.merge(s.common,s[i.method]);s&&d.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),i.headers=Y.concat(r,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(i)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,h=0,f;if(!l){const m=[si.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,u=Promise.resolve(i);h<f;)u=u.then(m[h++],m[h++]);return u}f=a.length;let g=i;for(h=0;h<f;){const m=a[h++],v=a[h++];try{g=m(g)}catch(w){v.call(this,w);break}}try{u=si.call(this,g)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=be(this.defaults,t);const i=Vi(t.baseURL,t.url,t.allowAbsoluteUrls);return ji(i,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){ge.prototype[t]=function(i,n){return this.request(be(n||{},{method:t,url:i,data:(n||{}).data}))}});d.forEach(["post","put","patch"],function(t){function i(n){return function(s,r,a){return this.request(be(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}ge.prototype[t]=i(),ge.prototype[t+"Form"]=i(!0)});let qo=class Zi{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(s){i=s});const n=this;this.promise.then(o=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](o);n._listeners=null}),this.promise.then=o=>{let s;const r=new Promise(a=>{n.subscribe(a),s=a}).then(o);return r.cancel=function(){n.unsubscribe(s)},r},t(function(s,r,a){n.reason||(n.reason=new ze(s,r,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const t=new AbortController,i=n=>{t.abort(n)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new Zi(function(o){t=o}),cancel:t}}};function Xo(e){return function(i){return e.apply(null,i)}}function Yo(e){return d.isObject(e)&&e.isAxiosError===!0}const Et={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Et).forEach(([e,t])=>{Et[t]=e});function Gi(e){const t=new ge(e),i=Ci(ge.prototype.request,t);return d.extend(i,ge.prototype,t,{allOwnKeys:!0}),d.extend(i,t,null,{allOwnKeys:!0}),i.create=function(o){return Gi(be(e,o))},i}const U=Gi(Be);U.Axios=ge;U.CanceledError=ze;U.CancelToken=qo;U.isCancel=Wi;U.VERSION=Ki;U.toFormData=it;U.AxiosError=A;U.Cancel=U.CanceledError;U.all=function(t){return Promise.all(t)};U.spread=Xo;U.isAxiosError=Yo;U.mergeConfig=be;U.AxiosHeaders=Y;U.formToJSON=e=>Hi(d.isHTMLForm(e)?new FormData(e):e);U.getAdapter=Ji.getAdapter;U.HttpStatusCode=Et;U.default=U;const{Axios:Lr,AxiosError:Pr,CanceledError:Dr,isCancel:Nr,CancelToken:Br,VERSION:kr,all:Ur,Cancel:Ir,isAxiosError:jr,spread:Fr,toFormData:Hr,AxiosHeaders:Wr,HttpStatusCode:$r,formToJSON:Vr,getAdapter:qr,mergeConfig:Xr}=U,Jo="ds8q7doz2",Ko="my_unsigned_preset";async function Zo(e){const t=new FormData;return t.append("file",e),t.append("upload_preset",Ko),(await U.post(`https://api.cloudinary.com/v1_1/${Jo}/image/upload`,t,{headers:{"Content-Type":"multipart/form-data"}})).data.secure_url}const Go={class:"flex-baseline wrap",style:{"margin-bottom":"16px"}},Qo={class:"flex-center"},er={class:"flex-center wrap"},tr={class:"custom-flex"},ir={class:"flex-right mobile-mt-sm"},nr={class:"custom-card"},sr={class:"custom-card"},or={class:"mt-12px flex-gap"},rr={class:"w-100"},ar={class:"w-100"},lr={class:"custom-card"},cr={class:"mt-12px flex-gap"},ur={class:"w-100"},hr={class:"w-100"},dr={class:"custom-card"},fr={class:"custom-card"},mr={class:"custom-card"},pr={class:"custom-card"},gr={class:"custom-flex"},vr={class:"flex-right mobile-mt-sm"},br={class:"custom-card"},wr={class:"custom-card"},yr={class:"image-gallery"},Rr={class:"image-order body-extra-small-semi-bold neutral-800"},Ar={class:"image-actions"},Sr={key:0,class:"main-label flex-center"},xr={class:"image-box add-image"},Er={class:"custom-card"},Yr=ui({__name:"View",setup(e){const t=sn();on();const{generateRandomSuffix:i,onResetValidateField:n}=rn(),o=Z(),s=Z(null),r=Xe({isSubmitting:!1,isLoadingRoomView:!1,isLoadingRoomBed:!1,isLoadingFacility:!1,isLoadingCancellationPolicySetupInfo:!1}),a=Xe({nameAccommodation:null,numberOfRooms:null,area:null,fullName:null,roomType:null,viewRoom:null,description:null,facilities:[],price:null,address:null,imageList:[],latitude:null,longitude:null,status:mn.APPROVED}),l={},c=S=>{a.imageList.forEach(b=>b.firstDisplay=0),S&&(S.firstDisplay=1),!a.imageList.some(b=>b.firstDisplay===1)&&a.imageList.length>0&&(a.imageList[0].firstDisplay=1)},u=S=>{const b={file:S,url:URL.createObjectURL(S),fileName:`${i()}-${S.name}`,firstDisplay:0};a.imageList.length<11&&(a.imageList.push(b),n("imageList")),f()},h=S=>{a.imageList=a.imageList.filter(b=>b.fileName!==S.fileName),f()},f=()=>{c(),s.value?.resetImage()},g=S=>{a.numberOfRooms=Number(S)},m=S=>{a.area=Number(S)},v=S=>{a.price=Number(S)},w=()=>{t.go(-1)},z=()=>{o.value?.validate(S=>{S&&L()})},L=async()=>{r.isSubmitting=!0;try{a.imageList.map(T=>T.file).length>0&&await D(),a.imageList=a.imageList.map(({file:T,..._})=>_),await vs(a)&&(hn({message:"Thêm Tin đăng mới thành công!",type:"success"}),t.push({name:"ProjectList"}))}catch(S){alert("Có lỗi xảy ra: "+S)}finally{r.isSubmitting=!1}},D=async()=>{const S=a.imageList.map(T=>T.file);console.log("onlyFiles00 :",S);const b=await Promise.all(S.map(T=>I(T)));a.imageList=a.imageList.map((T,_)=>({...T,imagePath:b[_]}))},I=async S=>{if(S)try{return await Zo(S)}catch(b){return console.error("Upload failed:",b),null}return null},F=S=>{a.latitude=S.lat,a.longitude=S.lng};return(S,b)=>{const T=k("el-icon"),_=k("el-link"),K=k("el-button"),N=k("el-input"),B=k("el-form-item"),ne=k("el-option"),fe=k("el-select"),Te=k("el-divider"),Qi=k("el-image"),Nt=k("el-tooltip"),en=k("el-form");return E(),P(fn,{isHeaderCustom:!0},{default:x(()=>[p("div",Go,[p("div",Qo,[p("div",null,[y(_,{underline:!1,type:"primary",onClick:b[0]||(b[0]=C=>w())},{default:x(()=>[y(T,{color:"black",style:{"margin-right":"8px"}},{default:x(()=>[y(he(an))]),_:1})]),_:1})]),b[9]||(b[9]=p("div",null,[p("p",{class:"title2 neutral-900"},"Tạo Tin Đăng mới")],-1))]),p("div",er,[y(K,{loading:r.isSubmitting,type:"primary",size:"large",onClick:z},{default:x(()=>b[10]||(b[10]=[J(" Tạo mới ",-1)])),_:1,__:[10]},8,["loading"])])]),y(en,{model:a,rules:l,ref_key:"formRef",ref:o},{default:x(()=>[p("div",tr,[b[20]||(b[20]=p("div",{class:"flex-left"},[p("p",{class:"body-medium-semi-bold neutral-700"},"Thông tin phòng"),p("p",{class:"body-small-regular neutral-500"}," Thiết lập các thông tin cơ bản của phòng ")],-1)),p("div",ir,[p("div",nr,[b[11]||(b[11]=p("div",null,[p("p",{class:"body-small-regular neutral-700"},[J(" Tên cơ sở lưu trú "),p("span",{class:"secondary-red-600"},"*")])],-1)),p("div",null,[y(B,{prop:"nameAccommodation"},{default:x(()=>[y(N,{placeholder:"Nhập tên cơ sở lưu trú",modelValue:a.nameAccommodation,"onUpdate:modelValue":b[1]||(b[1]=C=>a.nameAccommodation=C)},null,8,["modelValue"])]),_:1})])]),p("div",sr,[p("div",or,[p("div",rr,[b[12]||(b[12]=p("p",{class:"body-small-regular neutral-700"},[J(" Số lượng phòng "),p("span",{class:"secondary-red-600"},"*")],-1)),y(B,{prop:"numberOfRooms"},{default:x(()=>[y(Bt,{algin:"left",min:1,max:100,placeholder:"Nhập số lượng phòng",valueNumber:a.numberOfRooms,onOnChange:g},null,8,["valueNumber"])]),_:1})]),p("div",ar,[b[13]||(b[13]=p("p",{class:"body-small-regular neutral-700"},[J(" Diện tích phòng "),p("span",{class:"secondary-red-600"},"*")],-1)),y(B,{prop:"area"},{default:x(()=>[y(Bt,{algin:"left",suffix:" m²",min:0,max:9999,placeholder:"Nhập diện tích phòng",valueNumber:a.area,onOnChange:m},null,8,["valueNumber"])]),_:1})])])]),p("div",lr,[p("div",cr,[p("div",ur,[b[14]||(b[14]=p("p",{class:"body-small-regular neutral-700"},[J(" Họ và tên người đại diện "),p("span",{class:"secondary-red-600"},"*")],-1)),y(B,{prop:"fullName"},{default:x(()=>[y(N,{placeholder:"Nhập số lượng phòng",modelValue:a.fullName,"onUpdate:modelValue":b[2]||(b[2]=C=>a.fullName=C)},null,8,["modelValue"])]),_:1})]),p("div",hr,[b[15]||(b[15]=p("p",{class:"body-small-regular neutral-700"},[J(" Giá thuê phòng "),p("span",{class:"secondary-red-600"},"*")],-1)),y(B,{prop:"price"},{default:x(()=>[y(On,{suffix:"/1 tháng",algin:"left",placeholder:"Nhập giá thuê phòng",modelValue:a.price,"onUpdate:modelValue":b[3]||(b[3]=C=>a.price=C),onOnChange:v},null,8,["modelValue"])]),_:1})])])]),p("div",dr,[b[16]||(b[16]=p("div",null,[p("p",{class:"body-small-regular neutral-700"},[J(" Loại phòng "),p("span",{class:"secondary-red-600"},"*")])],-1)),p("div",null,[y(B,null,{default:x(()=>[y(fe,{loading:r.isLoadingRoomBed,class:"w-100",modelValue:a.roomType,"onUpdate:modelValue":b[4]||(b[4]=C=>a.roomType=C),placeholder:"Chọn loại phòng","loading-text":"Đang tải...","no-data-text":"Khong có dữ liệu"},{default:x(()=>[(E(!0),ee(ye,null,Re(he(pn),(C,me)=>(E(),P(ne,{key:me,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["loading","modelValue"])]),_:1})])]),p("div",fr,[b[17]||(b[17]=p("div",null,[p("p",{class:"body-small-regular neutral-700"},"Hướng phòng")],-1)),p("div",null,[y(B,null,{default:x(()=>[y(fe,{loading:r.isLoadingRoomView,class:"w-100",modelValue:a.viewRoom,"onUpdate:modelValue":b[5]||(b[5]=C=>a.viewRoom=C),placeholder:"Chọn hướng phòng","loading-text":"message.loading","no-data-text":"no_data"},{default:x(()=>[(E(!0),ee(ye,null,Re(he(gn),(C,me)=>(E(),P(ne,{key:me,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["loading","modelValue"])]),_:1})])]),p("div",mr,[b[18]||(b[18]=p("div",null,[p("p",{class:"body-small-regular neutral-700"},[J(" Địa chỉ "),p("span",{class:"secondary-red-600"},"*")])],-1)),p("div",null,[y(B,{prop:"address"},{default:x(()=>[y(N,{placeholder:"Nhập địa chỉ",modelValue:a.address,"onUpdate:modelValue":b[6]||(b[6]=C=>a.address=C)},null,8,["modelValue"])]),_:1})])]),p("div",pr,[b[19]||(b[19]=p("div",null,[p("p",{class:"body-small-regular neutral-700"},"Mô tả phòng")],-1)),p("div",null,[y(B,null,{default:x(()=>[y(N,{type:"textarea",placeholder:"Nhập mô tả ngắn gọn",modelValue:a.description,"onUpdate:modelValue":b[7]||(b[7]=C=>a.description=C),rows:"5",maxlength:"3000","show-word-limit":""},null,8,["modelValue"])]),_:1})])])])]),y(Te),p("div",gr,[b[25]||(b[25]=p("div",{class:"flex-left"},[p("p",{class:"body-medium-semi-bold neutral-700"},"Tiện ích và hình ảnh"),p("p",{class:"body-small-regular neutral-500"}," Thêm tiện ích và hình ảnh để khách dễ dàng lựa chọn phòng của bạn ")],-1)),p("div",vr,[p("div",br,[p("div",null,[b[21]||(b[21]=p("p",{class:"body-small-regular neutral-700"},"Thêm tiện ích",-1)),p("div",null,[y(fe,{loading:r.isLoadingRoomBed,class:"w-100",multiple:"",modelValue:a.facilities,"onUpdate:modelValue":b[8]||(b[8]=C=>a.facilities=C),placeholder:"Chọn tiên ích","loading-text":"Đang tải...","no-data-text":"Khong có dữ liệu"},{default:x(()=>[(E(!0),ee(ye,null,Re(he(vn),(C,me)=>(E(),P(ne,{key:me,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["loading","modelValue"])])])]),b[23]||(b[23]=p("div",{class:"custom-card"},[p("div",null,[p("p",{class:"body-small-regular neutral-500"},[J(" Thêm ảnh phòng "),p("span",{class:"secondary-red-600"},"*")]),p("p",{class:"body-small-regular neutral-500"}," Ảnh phòng phải có định dạng JPG hoặc PNG, dung lượng không quá 3Mb. ")])],-1)),p("div",wr,[y(B,{prop:"imageList"},{default:x(()=>[p("div",yr,[(E(!0),ee(ye,null,Re(a.imageList,(C,me)=>(E(),ee("div",{class:Tt(["image-box",{active:C.firstDisplay}]),key:C.id},[y(Qi,{src:C.url,class:"image-preview",fit:"cover"},null,8,["src"]),p("span",Rr,zt(me+1),1),p("div",Ar,[p("div",null,[p("div",null,[y(Nt,{content:"Đặt làm ảnh đại diện",placement:"top"},{default:x(()=>[y(T,{class:"secondary-orange-600",onClick:tn=>c(C)},{default:x(()=>[y(he(ln))]),_:2},1032,["onClick"])]),_:2},1024)])]),p("div",null,[y(Nt,{content:"Xóa ảnh",placement:"top"},{default:x(()=>[y(T,{class:"neutral-0",onClick:tn=>h(C)},{default:x(()=>[y(he(cn))]),_:2},1032,["onClick"])]),_:2},1024)])]),C.firstDisplay?(E(),ee("div",Sr,b[22]||(b[22]=[p("i",{class:"el-icon-star-on secondary-orange-500"},null,-1),p("p",{class:"small-cap-small-cap secondary-orange-600"}," Ảnh đại diện ",-1)]))):Me("",!0)],2))),128)),p("div",null,[y(ps,{ref_key:"cropperFixedRef",ref:s,onOnResult:u,width:1370,height:930,typeUpload:"avatar-upload-custom"},{default:x(()=>[p("div",xr,[y(T,null,{default:x(()=>[y(he(un))]),_:1})])]),_:1},512)])])]),_:1})]),b[24]||(b[24]=p("div",{class:"custom-card"},[p("div",null,[p("p",{class:"body-small-regular neutral-500"},[J(" Thêm vị trí trên bản đồ "),p("span",{class:"secondary-red-600"},"*")]),p("p",{class:"body-small-regular neutral-500"}," Bản đồ được chọn bằng cách nhập địa điểm bên dưới. ")])],-1)),p("div",Er,[y(dn,{"onUpdate:location":F})])])])]),_:1},8,["model"])]),_:1})}}});export{Yr as default};
